<ngx-spinner bdOpacity=0.5 bdColor="#333" color="#fff" type="ball-spin-clockwise-fade" loadingText="Loading...">
</ngx-spinner>

<!-- Modal for Agenda / minutes list -->
<div class="modal fade bd-example-modal-lg" id="AgendaMinutesModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
  aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header popup-header dotted-bottom">
        <h5 class="modal-title txt-large thick" id="exampleModalLongTitle">{{modalTitle}}
        </h5>
        <button type="button" class="close modal-close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body modal-popup dotted-bottom">
        <p class="text-secondary txt-medium">{{modalPara}} </p>
        <div class="w-100">
          <table class="table tbl-p-clr" *ngIf="agendaList.length > 0">
            <thead class="tbl-head-clr txt-medium p-75">
              <tr>

                <th title="">Versions</th>
                <th title="">Agenda Generated</th>
                <th title="">Action</th>
              </tr>
            </thead>
            <tbody class="txt-small p-75">
              <tr *ngFor="let agenda of agendaList;let i=index" class="pull-up solid-bottom">
                <td class="align-middle">{{agenda.agendaNumber}}</td>
                <td class="align-middle">{{agenda.createUser}} on {{agenda.createTimestamp |date: 'MM/dd/yyyy'}}</td>
                <td>
                  <span class="btn p-0" title="Download" (click)="downloadAgendaAttachment(agenda.scheduleAgendaId)">
                    <i aria-hidden="true" class="fa fa-download log-user-icon-lite m-0 p-0"></i>
                  </span>
                </td>
              </tr>

            </tbody>
          </table>

          <table class="table tbl-p-clr" *ngIf="minutelist.length > 0">
            <thead class="tbl-head-clr txt-medium p-75">
              <tr>

                <th title="">Versions</th>
                <th title="">Minute Generated</th>
                <th title="">Action</th>
              </tr>
            </thead>
            <tbody class="txt-small p-75">
              <tr *ngFor="let minute of minutelist;let i=index" class="pull-up solid-bottom">
                <td class="align-middle">{{minute.minuteNumber}}</td>
                <td class="align-middle">{{minute.createUser}} on {{minute.createTimestamp |date: 'MM/dd/yyyy'}}</td>
                <td>
                  <span class="btn p-0" title="Download" (click)="downloadMinuteAttachment(minute.scheduleMinuteDocId)">
                    <i aria-hidden="true" class="fa fa-download log-user-icon-lite m-0 p-0"></i>
                  </span>
                </td>
              </tr>
            </tbody>
          </table>

        </div>
      </div>
      <div class="modal-footer btn-row-med p-2">
        <button type="button" class="btn btn-outline-success txt-small" data-dismiss="modal">ok</button>

      </div>
    </div>
  </div>
</div>
<!-- Modal for Agenda / minutes list Ends -->

<div>
  <div class="container-fluid pushFixedHeaderFooter">
    <div class="headerPush"></div>
    <div class="position-relative">
      <section class="card">
        <div class="col-12 card-body">
          <div class="row">
            <div class="col-12 apprve-date">
              <div class="row">
                <div class="col-sm-12 col-md-12 col-lg-12 text-right" (click)="backClick()" title="Close">
                  <i class="fa fa-times-circle btn-close-committe-lite" aria-hidden="true"></i>
                </div>
                <div class="col-md-5 col-sm-4 col-12">
                  <h4 class="txt-large text-secondary normal">
                    Committee ID # :
                    <span class="text-danger">{{result?.committee?.committeeId}}</span>
                  </h4>
                  <p class="text-secondary txt-large normal">
                    Meeting ID :
                    <span class="text-danger">{{result?.committeeSchedule?.scheduleId}}</span>
                  </p>
                </div>
                <div class="col-md-4 col-sm-4 col-12">
                  <p class="text-secondary txt-large normal">
                    Committee Name :
                    <span class="text-danger">{{result?.committee?.committeeName}}</span>
                    <br /> Meeting Date :
                    <span class="text-danger">{{result?.committeeSchedule?.meetingDate | date: 'MM/dd/yyyy'}}</span>
                  </p>
                </div>
                <div class="col-md-3 col-sm-4 col-12">
                  <p class="text-secondary txt-large normal">
                    Committee Type:
                    <span class="text-danger">{{result?.committee?.committeeType?.description}}</span>
                  </p>
                </div>
              </div>
              <div class="row">
                <div class="col-md-5 col-sm-4 col-12">
                  <span class="txt-medium text-secondary pointer" *ngIf="result?.agendaDetails != null" (click)="downloadLatestAgenda()">
                    <i class="fa fa-file-pdf-o text-success icon-padding"></i>
                    <u>View Agenda</u>
                  </span>
                  <div class="txt-small" *ngIf="result?.agendaDetails != null">Generated By: {{result?.agendaDetails?.createUser}} On {{result?.agendaDetails?.createTimestamp | date:
                    'MM/dd/yyyy'}}</div>

                  <span class="txt-medium text-secondary" *ngIf="result?.agendaDetails == null">
                    <i class="fa fa-file-pdf-o text-success icon-padding"></i>Agenda Not Yet Generated
                  </span>
                </div>
                <div class="col-md-4 col-sm-4 col-12">
                  <span class="txt-medium text-secondary pointer" *ngIf="result?.minuteDetails != null" (click)="downloadLatestMinutes()">
                    <i class="fa fa-file-pdf-o text-success icon-padding"></i>
                    <u>View Minutes</u>
                  </span>
                  <div class="txt-small" *ngIf="result?.minuteDetails != null">Generated By: {{result?.minuteDetails?.createUser}} On {{result?.minuteDetails?.createTimestamp | date:
                    'MM/dd/yyyy'}}</div>

                  <span class="txt-medium text-secondary" *ngIf="result?.minuteDetails == null">
                    <i class="fa fa-file-pdf-o text-success icon-padding"></i>Minutes Not Yet Generated
                  </span>
                </div>
                <div class="col-md-3 col-sm-4 col-12">
                  <ul class="headerMenu align-right">
                    <li>
                      <a class="dropdown"> More Actions
                        <i class="fa fa-ellipsis-v" id="agendaMenu" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" title="More Actions"></i>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="agendaMenu">
                          <a class="dropdown-item  nav-dropdown pointer" (click)="createAgendaForSchedule()">Generate Agenda
                          </a>
                          <a class="dropdown-item  nav-dropdown pointer" (click)="createMinutesForSchedule()">Generate Minutes
                          </a>
                          <a class="dropdown-item  nav-dropdown pointer" data-target="#AgendaMinutesModal" data-toggle="modal" (click)="showModal('agenda')">Show All Agendas
                          </a>
                          <a class="dropdown-item  nav-dropdown pointer" data-target="#AgendaMinutesModal" data-toggle="modal" (click)="showModal('minutes')">Show All Minutes</a>
                        </div>
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
    <section class="row">
      <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <section class="row btn-row-med-lite sect-padding-lite bg-clr mt-10">
          <button class="btn btn-primary tab_btn" data-toggle="modal" data-target="#warningModalMain" (click)="show_current_tab($event,'scheduleHome')"
            [ngClass]="{'nav-active':currentTab=='scheduleHome'}">
            <i class="fa fa-calendar"></i>Schedule
          </button>
          <button class="btn btn-primary tab_btn" type="submit" data-toggle="modal" data-target="#warningModalMain" [ngClass]="{'nav-active':currentTab=='protocolSubmitted'}"
            (click)="show_current_tab($event,'protocolSubmitted')">
            <i class="fa fa-file-text-o"></i>Protocol Submitted
          </button>
          <button class="btn btn-primary tab_btn" type="submit" data-toggle="modal" data-target="#warningModalMain" [ngClass]="{'nav-active':currentTab=='attendance'}"
            (click)="show_current_tab($event,'attendance')">
            <i class="fa fa-hand-paper-o"></i>Attendance
          </button>
          <button class="btn btn-primary tab_btn" type="submit" data-toggle="modal" data-target="#warningModalMain" [ngClass]="{'nav-active':currentTab=='otherAction'}"
            (click)="show_current_tab($event,'otherAction')">
            <i class="fa fa-cog"></i>Other Actions
          </button>
          <button class="btn btn-primary tab_btn" type="submit" data-toggle="modal" data-target="#warningModalMain" [ngClass]="{'nav-active':currentTab=='attachment'}"
            (click)="show_current_tab($event,'attachment')">
            <i class="fa fa-paperclip"></i>Attachments
          </button>
          <button class="btn btn-primary tab_btn" type="submit" data-toggle="modal" data-target="#warningModalMain" [ngClass]="{'nav-active':currentTab=='minutes'}"
            (click)="show_current_tab($event,'minutes')">
            <i class="fa fa-pencil-square-o"></i>Minutes
          </button>
          <span class="thick txt-large" style="float: right;">
            <span routerLink='/irb/committee/scheduleDetails' [queryParams]="{mode :'view', id: committeeId}" class="pointer text-danger p-2">
              <u style="font-size: 14px;">
                <i class="fa fa-mail-reply">&nbsp;</i>Return To Meeting List</u>
            </span>
          </span>
        </section>
      </div>
    </section>

    <router-outlet (activate)="onActivate($event)"></router-outlet>

    <div class="footerPush"></div>
  </div>
</div>