<div class="headerPush"></div>
<ngx-spinner bdOpacity=0.5 bdColor="#333" color="#fff" type="ball-spin-clockwise-fade" loadingText="Loading..."></ngx-spinner>
<div class="container-fluid">
	<section class="row sect-padding">
		<div class="col-12 top-aprv-details">
			<div class="row">
				<div class="col-12">
					<div class="Welcome-msg">
						<p [innerHTML]="ABOUT_MESSAGE">
						</p>
					</div>
				</div>
				<div class="col-12 col-md-12 col-sm-6 apprve-date mb-15 pl0" *ngIf="isViewMode || isEditMode">
					<div class="col-2 display">
						<span *ngIf="requestObject.irbExemptForm?.isExempt=='Y' && requestObject.irbExemptForm?.status=='Submitted' " class="in-progress active-en margin-fix">Exempt</span>
						<span *ngIf="requestObject.irbExemptForm?.isExempt=='N' && requestObject.irbExemptForm?.status=='Submitted'"
						 class="active-status active-en margin-fix">Not Exempt</span>
						<span *ngIf="requestObject.irbExemptForm?.isExempt==null || requestObject.irbExemptForm?.status=='In Progress' "
						 class="active-status active-en margin-fix">Not Submitted</span>
						<span *ngIf="requestObject.irbExemptForm?.isExempt=='O' && requestObject.irbExemptForm?.status=='Submitted'"
						 class="in-drafts active-en margin-fix">Review Not Required</span>
					</div>
				</div>
				<div class="col-12 apprve-date display" *ngIf="showQuestionaire">
					<div class="title-head">
						<h4 class="pl0">
							Exempt Id :
							<span>E- {{requestObject.irbExemptForm.exemptFormID}}
							</span>
						</h4>
					</div>
				</div>
				<div class="col-12 apprve-date">
					<div class="col-2 title-head pl0">
						<h4>*Title:</h4>
					</div>
					<div class="col-9 width-exempt searchBox display">
						<input class="form-control" type="text" [disabled]="isViewMode" maxlength="250" [(ngModel)]="requestObject.irbExemptForm.exemptTitle"
						 placeholder="Enter Exempt Title">
					</div>
				</div>
				<div class="col-12 apprve-date">
					<div class="col-2 title-head pl0">
						<h4>*Principal Investigator:</h4>
					</div>
					<div class="col-4 width-exempt searchBox display">
						<input class="form-control" type="text" *ngIf="!isViewMode" (input)="clearSelectedPIdata()" [(ngModel)]="requestObject.irbExemptForm.personName"
						 placeholder="Search: PI Name" [formControl]="piSearchText" (focus)="IsElasticResultPI = true" (focusout)="IsElasticResultPI = false"
						/>
						<input class="form-control" type="text" [disabled]="isViewMode" [(ngModel)]="requestObject.irbExemptForm.personName"
						 *ngIf="isViewMode" />
						<div class="sb-seachresults results-margin">
							<ul class="sb-results-dropdown-menu test" *ngIf="IsElasticResultPI">
								<li *ngFor="let result of _results | async" (mousedown)="selectedPiResult(result)">
									<span [innerHTML]="result.label"></span>
								</li>
							</ul>
						</div>
					</div>
					<div class="col-1 title-head">
						<h4>Unit:</h4>
					</div>
					<div class="col-4 width-exempt searchBox display">
						<ng2-completer [(ngModel)]="requestObject.irbExemptForm.unitName" [inputClass]="'form-control'" placeholder="Search:Department Unit"
						 *ngIf="!isViewMode" [datasource]="unitName" [minSearchLength]="0" (ngModelChange)="unitChangeFunction(requestObject.irbExemptForm.unitName)"
						 (selected)="onUnitSelect()"></ng2-completer>
						<input class="form-control unit-margin" type="text" [disabled]="isViewMode" [(ngModel)]="requestObject.irbExemptForm.unitName"
						 *ngIf="isViewMode" />
					</div>
				</div>
				<!--Text change Ends-->

				<div class="col-12 apprve-date">
					<div class="col-2 title-head pl0">
						<h4>*Start Date:</h4>
					</div>
					<div class="col-4 width-exempt searchBox display">
						<input [disabled]="isViewMode" class="form-control datePickerRadius width-date" [owlDateTime]="dt4" placeholder="mm/dd/yyyy"
						 [(ngModel)]="requestObject.exemptProtocolStartDate">
						<owl-date-time [pickerType]="'calendar'" #dt4></owl-date-time>
						<span title="Choose Start Date"class="input-span-1 input-group-text" [owlDateTimeTrigger]="dt4">
								<i class="fa fa-calendar" aria-hidden="true"></i>
							</span>
					</div>
					<div class="col-1 title-head ">
						<h4>*End Date:</h4>
					</div>
					<div class="col-4 width-exempt searchBox display">
						<input [disabled]="isViewMode" class="form-control datePickerRadius margin-6 width-date" [owlDateTime]="dt3"
						 placeholder="mm/dd/yyyy" [(ngModel)]="requestObject.exemptProtocolEndDate">
						<owl-date-time [pickerType]="'calendar'" #dt3></owl-date-time>
						<span title="Choose End Date"class="input-span-1 input-group-text" [owlDateTimeTrigger]="dt3">
							<i class="fa fa-calendar" aria-hidden="true"></i>
						</span>
					</div>
					<!-- <div class="col-1 width-exempt searchBox display input-span-1">
							<span class="input-span-1 input-group-text" [owlDateTimeTrigger]="dt3">
							  <i class="fa fa-calendar" aria-hidden="true"></i>
							</span>
						  </div> -->
				</div>

				<div class="col-12 apprve-date">
					<div class="col-2 title-head pl0">
						<h4 class="sponsorFont">Faculty Sponsor:</h4>
					</div>
					<div class="col-4  width-exempt searchBox display">
						<input class="form-control" type="text" *ngIf="!isViewMode" (input)="clearSelectedFacultydata()" [(ngModel)]="requestObject.irbExemptForm.facultySponsorPerson"
						 placeholder="Search: Faculty Sponsor Name" [formControl]="facultySearchText" (focus)="IsElasticResultFaculty = true"
						 (focusout)="IsElasticResultFaculty = false" />
						<input class="form-control" type="text" [disabled]="isViewMode" [(ngModel)]="requestObject.irbExemptForm.facultySponsorPerson"
						 *ngIf="isViewMode" />
						<div class="sb-seachresults results-margin">
							<ul class="sb-results-dropdown-menu test" *ngIf="IsElasticResultFaculty">
								<li *ngFor="let result of _results | async" (mousedown)="selectedFacultyResult(result)">
									<span [innerHTML]="result.label"></span>
								</li>
							</ul>
						</div>
					</div>
				</div>
				<div class="col-12 apprve-date">
					<div class="col-2 title-head pl0">
						<h4>*Summary:</h4>
					</div>
					<div class="col-9 width-exempt searchBox dsp-flex">
						<textarea [disabled]="isViewMode" rows="3" maxlength="1250" [(ngModel)]="requestObject.irbExemptForm.summary" placeholder="Use this field to summarize your research. This description should be written in lay language. Include a brief description of the purpose of your reasearch along with the experimental procedures. This text should not exceed 1250 characters."></textarea>
					</div>
				</div>
				<div *ngIf="!isViewMode" class="col-12 exempt-id">
					<button [hidden]="showQuestionaire" id="#continueBtn" class="btn mb-3 btn-primary tab_btn ml-550" (click)="loadQuestionaire()" data-toggle="modal"
					 data-target="#alertModal" [disabled]="disableButton">Continue</button>
				</div>
				<!--new end-->
			</div>
		</div>
	</section>
</div>
<div class="container-fluid" *ngIf="showQuestionaire">
	<div class="row">
		<!--collapse-->
		<div class="col-12">
			<div class="card coll-card-q">
				<h5 class="card-header collapse_hd">
					Exempt Form
					<i class="fa fa-info-circle pdf" aria-hidden="true" data-toggle="modal" data-target="#welcomeModal"></i>
				</h5>
				<div class="card-body collapse-card-body">
					<div class="quest-no" *ngFor=' let questionIndex of questionaire.questionnaireQuestions; let indexQuestion = index'>
						<ul [ngSwitch]="questionIndex.answerType" class="list">
							<li *ngSwitchCase="'Radio'">
								<div class="row category-margin" *ngIf="questionIndex.groupLabel!==null && questionIndex.showQuestion == true">
									<div class="col-12 col-sm-12 col-md-12 pl-0">
										<p class="category">{{questionIndex.groupLabel}}</p>
									</div>
								</div>
								<div *ngIf="questionIndex.showQuestion == true" class="list" [ngClass]="{'errorquestion': showEvaluateMessageById(questionIndex.questionId)}">
									<p>
										{{questionIndex.question}}
										<span class="help-link">
											<i class="fa fa-lightbulb-o" (click)="getHelpLink(questionIndex.description, indexQuestion)"></i>
										</span>
									</p>
									<div *ngFor=" let option of questionaire.questionnaireOptions; let in=index" class="radio-inline ">
										<span *ngIf="questionIndex.questionId == option.QUESTION_ID">
											<input [disabled]="isViewMode" type="radio" name="{{option.QUESTION_ID}}" [value]="option.OPTION_LABEL" (change)="showChildQuestions(questionIndex)"
											 [(ngModel)]="questionIndex.selectedAnswer" /> {{option.OPTION_LABEL}}
										</span>
									</div>
									<div class="row category-margin" *ngIf="showHelpMsg[indexQuestion] == true">
										<div class="col-12 col-sm-12 col-md-12 pl-0 helpCard">
											<button class="closeResultCard close-help" (click)="getHelpLink(questionIndex.description, indexQuestion)">
												<i class="fa fa-times"></i>
											</button>
											<div class="helpMsg">
												<label [innerHTML]="helpMsg[indexQuestion]"></label>
											</div>
										</div>
									</div>
								</div>
							</li>
						</ul>
					</div>
					<div *ngIf="isEvaluate" class="col-12 eval-msg">
						<p class="alignLeft" [ngClass]="{'is-exempt-message':isExempt=='Y' || isExempt=='O',
							'not-exempt-message':isExempt=='N'}">
							<span class="danger">
								<i class="fa" [ngClass]="{'fa-star':isExempt=='Y' || isExempt=='O',
							'fa-warning':isExempt=='N'}" class="fa fa-star"></i>
							</span>
							{{alertMsg}}
							<span *ngIf="showEvaluateWarning!=''">
								<br/>
								<i class="fa" [ngClass]="{'fa-star':isExempt=='Y' || isExempt=='O',
								'fa-warning':isExempt=='N'}" class="fa fa-star"></i>{{showEvaluateWarning}}</span>
						</p>
					</div>
				</div>
			</div>
			<div class="container-fluid">
				<section class="row btn-row-med sect-padding">
					<button *ngIf="userDTO.role == 'ADMIN' || userDTO.role == 'CHAIR'" class="btn btn-primary tab_btn" data-toggle="modal" data-target="#checklistModal"
					 type="submit" (click)="showAddAttachmentPopUp($event)">Add/View Checklist</button>
					<button class="btn btn-primary tab_btn" (click)="openActionLogModal()" type="submit" data-toggle="modal"
					 data-target="#routeActionLogModal" id="actionLog">Action Log</button>

					<button class="btn btn-primary tab_btn" *ngIf="isViewMode == true && isPendingActionRequired" (click)="approveQuestionnireClick()"
					 data-toggle="modal" data-dismiss="modal" data-target="#approveRejectActionConfirmModal" id="approve">Approve</button>
					<button class="btn btn-primary tab_btn" *ngIf="isViewMode == true && isPendingActionRequired" (click)="rejectQuestionnireClick()"
					 data-toggle="modal" data-dismiss="modal" data-target="#approveRejectActionConfirmModal" id="reject">Reject</button>

					<button class="btn btn-primary tab_btn" *ngIf="isViewMode == false" (click)="saveQuestionaire()" id="save">Save</button>
					<button class="btn btn-primary " type="submit" *ngIf="isViewMode == false" (click)="evaluateExemptQuestionnaire()"
					 [ngClass]="QuestionnaireCompletionFlag=='N'? '':'tab_btn'" [disabled]="QuestionnaireCompletionFlag=='N'">Preview</button>
					<button class="btn btn-primary tab_btn" data-toggle="modal" data-target="#approveRejectActionConfirmModal" type="submit"
					 *ngIf="isViewMode == false && isActionByPi == true" (click)="returnQuestionnaireClick()" [disabled]="QuestionnaireCompletionFlag=='N'">Return</button>
					<button class="btn submit-btn" data-toggle="modal" data-target="#confirmModal" type="submit" *ngIf="isViewMode == false"
					 (click)="submitConfirmation()" [ngClass]="QuestionnaireCompletionFlag=='N'? '':'submit_btn'" [disabled]="QuestionnaireCompletionFlag=='N'">Submit</button>
				</section>
			</div>
		</div>
	</div>
</div>
<!-- message-modal -->
<div class="modal fade" id="alertModal" tabindex="-1" role="dialog" aria-labelledby="alertModalCenterTitle" aria-hidden="true"
 *ngIf="showAlert">
	<!-- alert modals-->
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header popup-header">
				<h5 class="modal-title" id="exampleModalLongTitle">{{modalHeading}}</h5>
				<button type="button" class="close modal-close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body modal-popup">
				<!-- section1 -->
				<div class="modal-padding">
					<div class="row">
						<div class="col-md-12 col-12 lg-12 col-sm-12 col-12">
							<h4 class="popup-sub-head questionnaire-popups">{{alertMsg}}</h4>
						</div>
					</div>
				</div>
				<section class="row btn-row-med sect-confirm-padding" *ngIf="showContinueButton">
					<button class="btn btn-primary tab_btn" (click)="continueWithQstnr()" aria-label="Close">Continue</button>
					<button class="btn btn-primary tab_btn" (click)="continueWithDashboard()" aria-label="Close">Exit to Dashboard</button>
				</section>
			</div>
		</div>
	</div>
	<!-- alert modals end-->
</div>
<!-- message-modal-end -->
<!--confirmation modal-->
<div class="modal fade" id="confirmModal" tabindex="-1" role="dialog" aria-labelledby="helpModalCenterTitle" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header popup-header">
				<h5 class="modal-title" id="exampleModalLongTitle">Confirmation</h5>
				<button type="button" class="close modal-close" data-dismiss="modal" aria-label="Close" (click)="closeConfirmation()">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body modal-popup">
				<!-- section1 -->
				<div class="modal-padding">
					<div class="row">
						<div class="col-md-12 col-12 lg-12 col-sm-12 col-12">
							<p class="confirm-text">
								<input type="checkbox" #agreeCheckbox="ngModel" [(ngModel)]="isChecked" (change)="0">
								<span class="col-12 confirm-text-padding" [innerHTML]="alertMsg"></span>
							</p>
						</div>
					</div>
				</div>
			</div>
			<section class="row btn-row-med sect-confirm-padding">
				<button class="btn btn-primary tab_btn" data-dismiss="modal" aria-label="Close" (click)="submitQuestionaire()" *ngIf="isChecked">Agree</button>
			</section>
		</div>
	</div>
</div>
<!-- confirmation modal end-->
<!--welcome message modal-->
<div class="modal fade" id="welcomeModal" tabindex="-1" role="dialog" aria-labelledby="helpModalCenterTitle" aria-hidden="true">
	<div class="modal-dialog modal-full" role="document">
		<div class="modal-content">
			<div class="modal-header popup-header">
				<div class="col-md-12 col-12 lg-12 col-sm-12 col-12">
					<h5 class="align" id="exampleModalLongTitle">Welcome to the COUHES Exempt Questionnaire</h5>
				</div>
			</div>
			<div class="modal-body modal-popup pb-0">
				<!-- section1 -->
				<div class="modal-padding pb-0">
					<div class="row">
						<div class="col-md-12 col-12 lg-12 col-sm-12 col-12">
							<h4 class="popup-sub-head questionnaire-popups">
								<p class="welcome-text" [innerHTML]="WELCOME_MESSAGE"></p>
							</h4>
						</div>
					</div>
				</div>
			</div>
			<section class="row btn-row-med sect-confirm-padding proceed-btn-align">
				<button class="btn btn-primary tab_btn proceed-btn" data-dismiss="modal" aria-label="Close" (click)="closeWelcome()">Proceed</button>
			</section>
		</div>
	</div>
</div>
<!-- welcome message modal end-->
<!-- welcome message modal end-->
<!--checklist modal-->
<div class="modal fade" id="checklistModal" tabindex="-1" role="dialog" aria-labelledby="helpModalCenterTitle" aria-hidden="true"
 data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog modal-full" role="document">
		<div class="modal-content">
			<div class="modal-header popup-header">
				<h5 class="modal-title" id="exampleModalLongTitle">Add CheckList</h5>
				<button type="button" class="close modal-close" data-dismiss="modal" (click)="closeAttachments()" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body modal-popup">
				<!-- section1 -->
				<div class="modal-padding">
					<div class="row">
						<div class="col-md-12 col-12 lg-12 col-sm-12 col-12">


							<table>
								<tr class="form-group">
									<td>
										<label class="label-color">*Description</label>
									</td>
									<td>
										<textarea class="form-control txt-area-fnt modal-table-padding modal-desc-width" placeholder="Description" [(ngModel)]="attachmentDescription"></textarea>
									</td>
								</tr>
							</table>
							<span *ngIf="isEmptyCheckListDescr" class="desc-warning">* Please provide checklist description to proceed</span>

							<file-drop customstyle="file-drop-color" (onFileDrop)="dropped($event)" (onFileOver)="fileOver($event)"
							(onFileLeave)="fileLeave($event)">
							<button class="btnSkin btnSkinPrimary mt-40" (click)="triggerAdd()">Choose
							  Files</button>
					  <input type="file" #file (change)="onChange(file.files)" multiple
							  id="addAttach" style="display: none" />
					  <div style="color: #a92034; margin-left: 10px;  margin-top: 40px;">OR Drop files
							  here</div>
	
						  </file-drop>
							<span *ngIf="isDuplicate" class="desc-warning">*File already choosen. Please choose a different one</span>
							<div class="filechip">
								<span *ngFor="let item of uploadedFile; let i=index">{{ item.name }}
									<i class="fa fa-close pdf" (click)="deleteFromUploadedFileList(item)"></i>
								</span>
							</div>

						</div>
					</div>
				</div>
			</div>
			<section class="row btn-row-med sect-confirm-padding proceed-btn-align">
				<button class="btn btn-primary tab_btn proceed-btn" aria-label="Close" (click)="addAttachments()">Add</button>
			</section>
			<table *ngIf="exemptAttachmentObject.length !== 0" class="table table-responsive ">
				<thead>
					<th title="">Sl Number</th>
					<th title="">Description</th>
					<th title="">File Name</th>
					<th title="">Action</th>
				</thead>
				<tr *ngFor="let attachments of exemptAttachmentObject; let i=index">
					<td>{{i+1}}</td>
					<td>
						<input class="form-control" type="text" [ngClass]="(!editScheduleattachment[i] == false)? 'checklistEditable' : 'checklistDescNotEditable'"
						 [disabled]="!editScheduleattachment[i] == true" [(ngModel)]="attachments.DESCRIPTION">
					</td>
					<td>{{attachments.FILENAME}}</td>
					<td>
						<ul class="actionButtonGroup">
							<li>
								<a (click)="tempSave($event,attachments)" title="Delete {{attachments.EXEMPT_FORM_CHECKLST_ID}}" data-toggle="modal"
								 data-target="#deleteAttachment">
									<i class="fa fa-trash-o delete-color"></i>
								</a>
							</li>
							<li>
								<a (click)="downloadAttachements($event, attachments)" title="Open{{attachments.EXEMPT_FORM_CHECKLST_ID}}">
									<i class="fa fa-download download-color" aria-hidden="true"></i>
								</a>
							</li>
							<li>
								<a *ngIf="!editScheduleattachment[i] == true" (click)="editAttachments($event,i, attachments)">
									<i class="fa fa-edit edit-color"></i>
								</a>
							</li>
							<li>
								<a *ngIf="!editScheduleattachment[i] == false" href="#" (click)="saveEditedattachments($event,i, attachments)">
									<i class="fa fa-floppy-o save-color" aria-hidden="true"></i>
								</a>
							</li>
							<li>
								<a *ngIf="!editScheduleattachment[i] == false" href="#" (click)="cancelEditedattachments($event,i, attachments)">
									<i class="fa fa-times cancel-color" aria-hidden="true"></i>
								</a>
							</li>
						</ul>
					</td>
				</tr>
			</table>

		</div>
	</div>
</div>
<!--checklist modal ends-->

<!-- delete warning modal -->
<div class="modal fade mySkinDialog modalFallBack" *ngIf="showPopup"
id="deleteAttachment" tabindex="-1" role="dialog"
aria-labelledby="deleteModalTitle" aria-hidden="true">
<div class="modal-dialog modal-dialog-centered" role="document">
  <div class="modal-content modal-text-color">
	<div class="modal-header popup-header">
	  <h5 class="modal-title modal-text-color">Want to delete?</h5>

	  <button type="button" class="close modal-close" data-dismiss="modal"
		aria-label="Close">
		<span aria-hidden="true">&times;</span>
	  </button>
	</div>
	<div class="modal-body">
	  <p>Are you sure you want to delete this item?</p>
	</div>
	<div class="modal-footer">
	  <button type="button" class="btn pop-up-color tab_btn proceed-btn pdf"
		data-dismiss="modal" data-toggle="modal" (click)="showPopup = false">No</button>
	  <button type="button" class="btn pop-up-color tab_btn proceed-btn pdf"
		(click)="deleteAttachments($event)" data-dismiss="modal">Yes</button>
	</div>
  </div>
</div>
</div>
<!-- delete warning modal ends -->

<!-- modal butoon hidden dont change -->
<button id="openModalButton" [hidden]="true" data-toggle="modal" data-target="#alertModal"></button>
<!-- end -->
<!-- modal butoon hidden for welcome message -->
<button id="openWelocomeModalButton" [hidden]="true" data-toggle="modal" data-target="#welcomeModal"></button>
<!-- end -->

<!-- stk -->
<!-- modal butoon hidden dont change -->
<button id="openWarningModalButton" [hidden]="true" data-toggle="modal" data-target="#alertWarningModal"></button>
<!-- end -->
<!-- message-modal -->
<div class="modal fade" id="alertWarningModal" tabindex="-1" role="dialog" aria-labelledby="alertModalCenterTitle" aria-hidden="true"
 *ngIf="showWarningAlert">
	<!-- alert modals-->
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header popup-header">
				<h5 class="modal-title" id="exampleModalLongTitle">{{modalHeading}}</h5>
				<button type="button" class="close modal-close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body modal-popup">
				<!-- section1 -->
				<div class="modal-padding">
					<div class="row">
						<div class="col-md-12 col-12 lg-12 col-sm-12 col-12">
							<h4 class="popup-sub-head questionnaire-popups">{{alertMsg}}</h4>
						</div>
					</div>
				</div>
			</div>
			<section class="row btn-row-med sect-warning-padding proceed-btn-align">
				<button class="btn mb-3 btn-primary tab_btn" data-dismiss="modal" aria-label="Close" (click)="proceedWithWarning()">Proceed</button>
				<button class="btn mb-3 btn-primary tab_btn" data-dismiss="modal" aria-label="Close">Close</button>
			</section>
		</div>
	</div>
	<!-- alert modals end-->
</div>
<!-- message-modal-end -->

<!--action log modal-->

<div class="modal fade" id="routeActionLogModal" tabindex="-1" role="dialog" aria-labelledby="actionLogModal" aria-hidden="true">
	<!-- alert modals-->
	<div class="modal-dialog modal-dialog-Action" role="document">
		<div class="modal-content">
			<div class="modal-header popup-header">
				<h5 class="modal-title" id="exampleModalLongTitle">Action Log</h5>
				<button type="button" class="close modal-close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<!--body-->
			<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 viewMode viewModeActionLog resultCard resultCardBefore">
				<div class="row cardColor-1">
					<div class="col-xl-4 col-lg-4 col-md-6 col-sm-6 col-6">
						<label>
							<b>Exempt Form #</b>
						</label>
						<span>{{actionLogResult?.irbExemptForm?.exemptFormID}}</span>
					</div>

					<div class="col-xl-4 col-lg-4 col-md-6 col-sm-6 col-6">
						<label>
							<b>Status</b>
						</label>
						<span>{{actionLogResult?.irbExemptForm?.status}}</span>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-6 col-sm-6 col-6">
						<label>
							<b>PI</b>
						</label>
						<span>{{actionLogResult?.irbExemptForm?.personName}}</span>
					</div>
					<div class="col-xl-12 col-lg-12 col-md-6 col-sm-6 col-6">
						<label>
							<b>Title</b>
						</label>
						<span>{{actionLogResult?.irbExemptForm?.exemptTitle}}</span>
					</div>
					<!-- <div class="col-xl-3 col-lg-3 col-md-6 col-sm-6 col-6">
				<label>Home Unit</label> <span></span>
			</div>
			<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
				<label>Title</label> <span></span>
			</div> -->
				</div>
			</div>
			<div class="row" *ngIf="finalStatus != null">
				<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
					<label class="routeLogStatus">finalStatus</label>
				</div>
			</div>
			<div class="borderBox col-12 cardTable pad-Bottom0">
				<div class="pullSide">
					<table class="table" id="routeLogTable">
						<thead class="tbl-head-clr thead-font-size cardThead">
							<th>Actions</th>
							<th>Status</th>
							<th>Comments</th>
							<th>Action Taken</th>
						</thead>
						<tr class="cardTr" *ngFor="let logItem of actionLogResult.actionLogs;let i = index">
							<td>{{logItem?.ACTION_TYPE}}
							</td>
							<td>{{logItem?.EXEMPT_STATUS}}
							</td>
							<!-- <td style="width:30%"><span *ngIf="!commentsGrantManagerExpand[i] && logItem?.COMMENTS?.length>30;else showFullGrantManagerComments" (click) = "commentsGrantManagerExpand[i] = !commentsGrantManagerExpand[i]">{{logItem?.approvalComment | slice:0:20}}<span  class="hand-cursor fibiDefaultColor italian">...Read more<i [ngClass]="commentsGrantManagerExpand[i]?'fa fa-angle-double-left':'fa fa-angle-double-right'"></i></span></span>
											
								<ng-template #showFullGrantManagerComments>{{logItem?.COMMENTS }}<i *ngIf="logItem?.COMMENTS?.length>30" (click)="commentsGrantManagerExpand[i] = !commentsGrantManagerExpand[i]" class="hand-cursor fibiDefaultColor italian"> Show Less<i [ngClass]="commentsGrantManagerExpand[i]?'fa fa-angle-double-left':'fa fa-angle-double-right'"></i></i></ng-template>
							</td>	 -->
							<td class="wComment" title="{{logItem?.COMMENTS}}">{{ (logItem?.COMMENTS?.length>100)? (logItem?.COMMENTS | slice:0:100)+'...':(logItem?.COMMENTS) }}
							</td>
							<td>
								<b>{{logItem?.UPDATE_USER}} </b>
								<br/> On {{logItem?.UPDATE_TIMESTAMP}}</td>

						</tr>
					</table>
				</div>
			</div>
			<!--end body-->
			<!--<div class="modal-footer pad-Top0">
				<button type="button" class="btnSkin btn-secondary" data-dismiss="modal" data-toggle="modal">Close</button>
			</div>-->
		</div>
	</div>

</div>

<!--end action log modal-->

<!-- start approveRejectActionConfirmModal-->
<div class="modal fade" id="approveRejectActionConfirmModal" tabindex="-1" role="dialog" aria-labelledby="alertModalCenterTitle"
 aria-hidden="true">
	<!-- alert modals-->
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header popup-header">
				<h5 class="modal-title" id="exampleModalLongTitle">{{ApproveRejectHeader}}</h5>
				<button type="button" class="close modal-close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body modal-popup">
				<!-- section1 -->
				<div class="modal-padding">
					<div class="row">
						<div class="col-md-12 col-12 lg-12 col-sm-12 col-12">
							<h4 style="text-align: left;" class="popup-sub-head questionnaire-popups">Please provide your comments</h4>
						</div>
						<!-- <div class="col-md-12 col-12 lg-12 col-sm-12 col-12">	<label>Comment</label></div> -->

						<div class="col-md-12 col-12 lg-12 col-sm-12 col-12">
							<textarea class="w100" rows="3" maxlength="1250" placeholder="Add Comment" [(ngModel)]="requestObject.irbExemptForm.comment"></textarea>
						</div>
					</div>
				</div>
			</div>
			<section class="row btn-row-med sect-confirm-padding proceed-btn-align">
				<button data-toggle="modal" class="btn btn-primary tab_btn proceed-btn" data-dismiss="modal" *ngIf="isApprovedAlert" aria-label="Close"
				 (click)="approveConfirmClick()">Approve</button>
				<button data-toggle="modal" class="btn btn-primary tab_btn proceed-btn" data-dismiss="modal" *ngIf="isRejectedAlert" aria-label="Close"
				 (click)="rejectConfirmClick()">Reject</button>
				<button data-toggle="modal" class="btn btn-primary tab_btn proceed-btn" data-dismiss="modal" *ngIf="isReturnAlert" aria-label="Close"
				 (click)="returnConfirmClick()">Return</button>
				<button data-toggle="modal" class="btn btn-primary tab_btn proceed-btn" data-dismiss="modal" aria-label="Close">Close</button>
			</section>
		</div>
	</div>
	<!-- alert modals end-->
</div>
<!-- end approveRejectActionConfirmModal-->