<div class="headerPush"></div>
<ngx-spinner bdOpacity=0.5 bdColor="#333" color="#fff"
	type="ball-spin-clockwise-fade" loadingText="Loading..."></ngx-spinner>
<div class="container-fluid">
	<section class="row sect-padding">
		<div class="col-12 top-aprv-details">
			<div class="row">
				<div class="col-12">
					<div class="Welcome-msg">
						<p>{{ABOUT_MESSAGE}}
						</p>
					</div>
				</div>
				<div class="col-12 col-md-12 col-sm-6 apprve-date mb-15 pl0"
					*ngIf="isViewMode || isEditMode">
					<div class="col-2 display">
						<span *ngIf="requestObject.irbExemptForm?.isExempt=='Y' && requestObject.irbExemptForm?.status=='Submitted' "
							class="in-progress active-en margin-fix">Exempt</span> <span
							*ngIf="requestObject.irbExemptForm?.isExempt=='N' && requestObject.irbExemptForm?.status=='Submitted'"
							class="active-status active-en margin-fix">Not Exempt</span> <span
							*ngIf="requestObject.irbExemptForm?.isExempt==null || requestObject.irbExemptForm?.status=='In Progress' "
							class="active-status active-en margin-fix">Not Submitted</span> <span
							*ngIf="requestObject.irbExemptForm?.isExempt=='O' && requestObject.irbExemptForm?.status=='Submitted'"
							class="in-drafts active-en margin-fix">Review Not Required</span>
					</div>
				</div>
				<div class="col-12 apprve-date display" *ngIf="showQuestionaire">
					<div class="title-head">
						<h4 class="pl0">
							Exempt Id : <span>E-
								{{requestObject.irbExemptForm.exemptFormID}}</span>
						</h4>
					</div>
				</div>
				<div class="col-12 apprve-date">
					<div class="col-1 title-head pl0">
						<h4>*Title:</h4>
					</div>
					<div class="col-10 width-exempt searchBox display">
						<input class="form-control" type="text" [disabled]="isViewMode"
							[(ngModel)]="requestObject.irbExemptForm.exemptTitle"
							placeholder="Enter Exempt Title">
					</div>
				</div>
				<div class="col-12 apprve-date">
					<div class="col-1 title-head pl0">
						<h4>*PI:</h4>
					</div>
					<div class="col-5 width-exempt searchBox display">
						<input class="form-control" type="text" *ngIf="!isViewMode"
							[(ngModel)]="requestObject.irbExemptForm.personName"
							placeholder="Search: PI Name" [formControl]="piSearchText"
							(focus)="IsElasticResultPI = true" (focusout)="IsElasticResultPI = false"/> <input class="form-control"
							type="text" [disabled]="isViewMode"
							[(ngModel)]="requestObject.irbExemptForm.personName"
							*ngIf="isViewMode" />
						<div class="sb-seachresults results-margin">
							<ul class="sb-results-dropdown-menu" *ngIf="IsElasticResultPI">
								<li *ngFor="let result of _results | async"
									(mousedown)="selectedPiResult(result)"><span
									[innerHTML]="result.label"></span></li>
							</ul>
						</div>
					</div>
					<div class="col-1 title-head">
						<h4>Unit:</h4>
					</div>
					<div class="col-4 width-exempt searchBox display">
						<ng2-completer [(ngModel)]="requestObject.irbExemptForm.unitName"
							placeholder="Search: Unit" *ngIf="!isViewMode"
							[datasource]="unitName" [minSearchLength]="0"
							(ngModelChange)="unitChangeFunction(requestObject.irbExemptForm.unitName)"
							(selected)="onUnitSelect()"></ng2-completer>
						<input class="form-control unit-margin" type="text" [disabled]="isViewMode"
							[(ngModel)]="requestObject.irbExemptForm.unitName"
							*ngIf="isViewMode" />
					</div>
				</div>
				<div class="col-12 apprve-date">
						<div class="col-1 title-head pl0">
								<h4>*Summary:</h4>
						</div>
						<div class="col-10 width-exempt searchBox dsp-flex">
						<textarea  [disabled]="isViewMode" rows="2" maxlength="350" [(ngModel)]="requestObject.irbExemptForm.summary" 
						placeholder="Use this field to summarize your research. This description should be written in lay language. Include a brief description of the purpose of your reasearch along with the experimental procedures. This text should not exceed 350 characters."></textarea>
						</div>
				</div>
				<div class="col-12 apprve-date">
					<div class="title-head">
						<h4 class="sponsorFont">Faculty Sponsor:</h4>
					</div>
					<div class="col-5  width-exempt searchBox display">
						<input class="form-control" type="text" *ngIf="!isViewMode"
							[(ngModel)]="requestObject.irbExemptForm.facultySponsorPerson"
							placeholder="Search: Faculty Sponsor Name"
							[formControl]="facultySearchText"
							(focus)="IsElasticResultFaculty = true"  (focusout)="IsElasticResultFaculty = false"/> <input
							class="form-control" type="text" [disabled]="isViewMode"
							[(ngModel)]="requestObject.irbExemptForm.facultySponsorPerson"
							*ngIf="isViewMode" />
						<div class="sb-seachresults results-margin">
							<ul class="sb-results-dropdown-menu"
								*ngIf="IsElasticResultFaculty">
								<li *ngFor="let result of _results | async"
									(mousedown)="selectedFacultyResult(result)"><span
									[innerHTML]="result.label"></span></li>
							</ul>
						</div>
					</div>
				</div>
				<div *ngIf="!isViewMode" class="col-12 exempt-id">
					<button [hidden]="showQuestionaire"
						class="btn mb-3 btn-primary tab_btn" (click)="loadQuestionaire()"
						data-toggle="modal" data-target="#alertModal">Continue</button>
				</div>
				<!--new end-->
			</div>
		</div>
	</section>
</div>
<div class="container-fluid" *ngIf="showQuestionaire">
	<div class="row">
		<!--collapse-->
		<div class="col-12">
			<div class="card coll-card-q">
				<h5 class="card-header collapse_hd">
					Exempt Form <i class="fa fa-info-circle pdf" aria-hidden="true" data-toggle="modal"
					data-target="#welcomeModal"></i>
				</h5>
				<div class="card-body collapse-card-body">
					<div class="quest-no"
						*ngFor=' let quest of questionaire.questionnaireQuestions; let indexQuestion = index'>
						<ul [ngSwitch]="quest.answerType" class="list">
							<li *ngSwitchCase="'Radio'">
									<div class="row category-margin" *ngIf="quest.groupLabel!==null && quest.showQuestion == true">
											<div class="col-12 col-sm-12 col-md-12 pl-0">
												<p class="category">{{quest.groupLabel}}</p>
											</div>
									</div>
								<div *ngIf="quest.showQuestion == true" class="list"
									[ngClass]="{'errorquestion': showEvaluateMessageById(quest.questionId)}">
									<p>
										{{quest.question}} <span class="help-link"> <i
											class="fa fa-lightbulb-o"
											(click)="getHelpLink(quest.description, indexQuestion)"></i></span>
									</p>
									<div
										*ngFor=" let option of questionaire.questionnaireOptions; let in=index"
										class="radio-inline ">
										<span *ngIf="quest.questionId == option.QUESTION_ID"> <input
											[disabled]="isViewMode" type="radio"
											name="{{option.QUESTION_ID}}" [value]="option.OPTION_LABEL"
											(change)="showChildQuestions(quest)"
											[(ngModel)]="quest.selectedAnswer" />
											{{option.OPTION_LABEL}}
										</span>
									</div>
									<div class="row category-margin" *ngIf="showHelpMsg[indexQuestion] == true">
										<div class="col-12 col-sm-12 col-md-12 pl-0 helpCard">
											<button class="closeResultCard close-help" (click)="getHelpLink(quest.description, indexQuestion)">
												<i class="fa fa-times"></i>
											</button>
											<p class="category help-Msg" [innerHTML]="helpMsg[indexQuestion]">
											</p>
										</div>
								   </div>
								</div>
							</li>
						</ul>
					</div>
					<div *ngIf="isEvaluate" class="col-12 eval-msg">
							<p [ngClass]="{'is-exempt-message':isExempt=='Y' || isExempt=='O',
							'not-exempt-message':isExempt=='N'}">
								<span class="danger">
								<i class="fa"[ngClass]="{'fa-check':isExempt=='Y' || isExempt=='O',
							'fa-warning':isExempt=='N'}" class="fa fa-check"></i>
								</span>
							{{alertMsg}}</p>
					</div>
				</div>
			</div>
			<div class="container-fluid">
				<section class="row btn-row-med sect-padding">
					<button class="btn btn-primary tab_btn" *ngIf="isViewMode == false"
						(click)="saveQuestionaire()" id="save">Save</button>
					<button class="btn btn-primary tab_btn" type="submit"
					*ngIf="isViewMode == false"
					(click)="evaluateExemptQuestionnaire()"
					[disabled]="QuestionnaireCompletionFlag=='N'">Evaluate</button>
					<button class="btn btn-primary tab_btn" data-toggle="modal"
						data-target="#confirmModal" type="submit"
						*ngIf="isViewMode == false" (click)="submitConfirmation()"
						[disabled]="QuestionnaireCompletionFlag=='N'">Submit</button>
				</section>
			</div>
		</div>
	</div>
</div>
<!-- message-modal -->
<div class="modal fade" id="alertModal" tabindex="-1" role="dialog"
	aria-labelledby="alertModalCenterTitle" aria-hidden="true"
	*ngIf="showAlert">
	<!-- alert modals-->
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header popup-header">
				<h5 class="modal-title" id="exampleModalLongTitle">Alert</h5>
				<button type="button" class="close modal-close" data-dismiss="modal"
					aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body modal-popup">
				<!-- section1 -->
				<div class="modal-padding">
					<div class="row">
						<div class="col-md-12 col-12 lg-12 col-sm-12 col-12">
							<h4 class="popup-sub-head">{{alertMsg}}</h4>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- alert modals end-->
</div>
<!-- message-modal-end -->
<!--confirmation modal-->
<div class="modal fade" id="confirmModal" tabindex="-1" role="dialog"
	aria-labelledby="helpModalCenterTitle" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header popup-header">
				<h5 class="modal-title" id="exampleModalLongTitle">Confirmation</h5>
				<button type="button" class="close modal-close" data-dismiss="modal"
					aria-label="Close" (click)="closeConfirmation()">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body modal-popup">
				<!-- section1 -->
				<div class="modal-padding">
					<div class="row">
						<div class="col-md-12 col-12 lg-12 col-sm-12 col-12">
							<p class="confirm-text">
								<input type="checkbox" #agreeCheckbox="ngModel"
									[(ngModel)]="isChecked" (change)="0"> {{alertMsg}}
							</p>
						</div>
					</div>
				</div>
			</div>
			<section class="row btn-row-med sect-confirm-padding">
				<button class="btn btn-primary tab_btn" data-dismiss="modal"
					aria-label="Close" (click)="submitQuestionaire()" *ngIf="isChecked">Agree</button>
			</section>
		</div>
	</div>
</div>
<!-- confirmation modal end-->
<!--welcome message modal-->
<div class="modal fade" id="welcomeModal" tabindex="-1" role="dialog"
	aria-labelledby="helpModalCenterTitle" aria-hidden="true">
	<div class="modal-dialog modal-full" role="document">
		<div class="modal-content">
			<div class="modal-header popup-header">
				<div class="col-md-12 col-12 lg-12 col-sm-12 col-12">
					<h5 class="align" id="exampleModalLongTitle">WELCOME TO THE COUHES EXEMPT QUESTIONNAIRE</h5>
				</div>
			</div>
			<div class="modal-body modal-popup">
					<!-- section1 -->
					<div class="modal-padding">
							<div class="row">
								<div class="col-md-12 col-12 lg-12 col-sm-12 col-12">
									<h4 class="popup-sub-head">
										<p class="welcome-text">{{WELCOME_MESSAGE}}</p>
									</h4>
								</div>
							</div>
						</div>
				</div>
			<section class="row btn-row-med sect-confirm-padding proceed-btn-align">
				<button class="btn btn-primary tab_btn proceed-btn" data-dismiss="modal"
					aria-label="Close" (click)="closeWelcome()">Proceed</button>
			</section>
		</div>
	</div>
</div>
<!-- welcome message modal end-->
<!-- modal butoon hidden dont change -->
<button id="openModalButton" [hidden]="true" data-toggle="modal"
	data-target="#alertModal">Open Modal</button>
<!-- end -->
<!-- modal butoon hidden for welcome message -->
<button id="openWelocomeModalButton" [hidden]="true" data-toggle="modal"
	data-target="#welcomeModal">Open Modal</button>
<!-- end -->