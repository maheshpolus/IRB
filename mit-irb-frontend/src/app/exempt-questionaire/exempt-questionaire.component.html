<div class="headerPush"></div>
<!-- <div class="row">
		<div class="col-10"></div>
		<div class="col-2 offset-md-4 exit-button">
			<button type="button" class="btn btn-warning" (click)="returnToExemptList($event)" title="Close">
				<i class="fa fa-times">&nbsp;</i>Exit</button>
		</div>
	</div> -->
<ngx-spinner bdOpacity=0.5 bdColor="#333" color="#fff" type="ball-spin-clockwise-fade" loadingText="Loading..."></ngx-spinner>
<div class="container-fluid position-relative">
	<div class="exit-button" *ngIf="isViewMode != false || requestObject?.irbExemptForm?.exemptFormID == null || requestObject?.irbExemptForm?.exemptFormID == ''" (click)="returnToExemptList($event)" title="Close">
			<i class="fa fa-times mg-6">&nbsp;</i>
		</div>
		<div class="exit-button" *ngIf="isViewMode == false && requestObject?.irbExemptForm?.exemptFormID != null" (click)="returnToExemptList2($event)" title="Save and Close">
				<i class="fa fa-times mg-6">&nbsp;</i>
			</div>
	<section class="row sect-padding">
		<div class="col-12 top-aprv-details">
			<div class="row">
				<div class="col-12">
					<div class="Welcome-alert alert alert-warning" *ngIf="!isQuestionaireSubmitted">
						<i class="fa fa-info-circle" aria-hidden="true"></i>
						<strong>Key elements of Exempt Evaluation.</strong>
						<span class="welcome-popup" data-toggle="modal" data-target="#welcomeModal" (click)="isStayOnSamePage = true">Click to View Details</span>
					</div>
					<div *ngIf="isQuestionaireSubmitted"  class=" exempt-description">
						<h5>Exempt Determinations:</h5>
							<div *ngFor="let exemptQuestion of exemptQuestionList let i=index" class="col-12 exempt-description">
								<div *ngIf="i==0 || showMore == true">
								<h6>{{exemptQuestion.CATEGORY}}</h6>
								{{exemptQuestion.CATEGORY_DESC}}
								
								<div class="pdf read-more" *ngIf="exemptQuestionList?.length > 1"> <span *ngIf="showMore==false"(click)="showMore=true">Read More...</span><span *ngIf="showMore==true && i==exemptQuestionList?.length-1" (click)="showMore=false">Read Less</span></div>
								<hr *ngIf="showMore==true && i!=exemptQuestionList?.length-1" >
							</div>
							</div>
							<div class="col-12">
								<div class="row">
										<div class="col-4 Welcome-alert alert alert-warning submit-alert pdf"  data-toggle="modal" data-target="#welcomeModal" (click)="isStayOnSamePage = true">
												
												<i class="fa fa-info-circle" aria-hidden="true"></i>
												 <strong>Key elements of Exempt Evaluation</strong>
											</div>
											<div class="col-3 Welcome-alert alert submit-alert alert-warning pdf" data-toggle="modal" data-target="#confirmModal" (click)="showConfirmationDetails = false">
													
													<i class="fa fa-info-circle" aria-hidden="true">
														 </i><strong> View Confirmation</strong>
												</div>
												<div class="col-4 Welcome-alert submit-alert alert alert-warning pdf" (click)="generateCorrespondence()">
														
														<i class="fa fa-download" aria-hidden="true"></i>
														<strong>Generate Determination</strong>
													</div>
									</div>
								</div>
								</div>
					<div class="Welcome-msg">
						<p [innerHTML]="ABOUT_MESSAGE">
						</p>
					</div>
				</div>
				<div class="col-12 apprve-date mt-0">
					<div class="row">
						<div class="col-9">
							<div class="title-head pl-15" *ngIf="isViewMode || isEditMode">
								<span *ngIf="requestObject.irbExemptForm?.isExempt=='Y' && requestObject.irbExemptForm?.status=='Submitted' " class="active-status active-en margin-fix">Exempt</span>
								<span *ngIf="requestObject.irbExemptForm?.isExempt=='N' && requestObject.irbExemptForm?.status=='Submitted'" class="completed-closed active-en margin-fix">Not Exempt</span>
								<span *ngIf="requestObject.irbExemptForm?.isExempt==null || requestObject.irbExemptForm?.status=='In Progress' " class="pending-action active-en margin-fix">Not Submitted</span>
								<span *ngIf="requestObject.irbExemptForm?.isExempt=='O' && requestObject.irbExemptForm?.status=='Submitted'" class="in-drafts active-en margin-fix">Review Not Required</span>
								<span *ngIf="requestObject.irbExemptForm?.isExempt=='O' && (requestObject.irbExemptForm?.statusCode=='3' || requestObject.irbExemptForm?.statusCode=='2' || requestObject.irbExemptForm?.statusCode=='5')"
								 class="in-drafts active-en margin-fix">Not Exempt-Pending Review</span>
								<span *ngIf="requestObject.irbExemptForm?.isExempt=='Y' && (requestObject.irbExemptForm?.statusCode=='3' || requestObject.irbExemptForm?.statusCode=='2' || requestObject.irbExemptForm?.statusCode=='5')"
								 class="pending-action active-en margin-fix">Exempt-Pending Review</span>
								<span *ngIf="requestObject.irbExemptForm?.isExempt=='N' && (requestObject.irbExemptForm?.statusCode=='3' || requestObject.irbExemptForm?.statusCode=='2' || requestObject.irbExemptForm?.statusCode=='5')"
								 class="pending-action active-en margin-fix">Not Exempt-Pending Review</span>
							</div>
						</div>
						<!-- <div class="col-3 width-exempt searchBox display">
							<a id="returnToDasboardLink" title="Back to Dashboard" (click)="returnToExemptList($event)">
								<i class="fa fa-mail-reply">&nbsp;</i>Return to Dashboard</a>
						</div> -->
					</div>
				</div>
				
					
				<div class="col-12  search-eidted-p padding-15">
					<div class="alert alert-danger " *ngIf="invalidData.invalidExemptData">
						Please fill all mandatory fields marked
						<strong>*</strong>
					</div>
				</div>
				<div class="col-12 apprve-date display mt-0" *ngIf="showQuestionaire">
					<div class="title-head">
						<h4 class="pl0">
							Exempt Id :
							<span>E- {{requestObject.irbExemptForm.exemptFormID}}
							</span>
						</h4>
					</div>
				</div>
				<div class="col-12 apprve-date mt-0">
					<div class="row">
						<div class="col-2 title-head pl-15" [ngClass]="{'invalid':invalidData.invalidExemptData && requestObject.irbExemptForm.exemptTitle == null}">
							<h4>* Title:</h4>
						</div>
						<div class="col-9 width-exempt searchBox display">
							<input class="form-control" type="text" [disabled]="isViewMode" maxlength="250" [(ngModel)]="requestObject.irbExemptForm.exemptTitle"
							 placeholder="Enter Exempt Title">
						</div>
					</div>
				</div>
				<div class="col-12 apprve-date mt-0">
					<div class="row">
						<div class="col-2 title-head pl-15" [ngClass]="{'invalid':invalidData.invalidExemptData && requestObject.irbExemptForm.personId == null}">
							<h4 style="display: inline-block;">* Principal Investigator:</h4>
							<i title="{{requestObject.irbExemptForm.personName}} may not have PI Status." *ngIf="(requestObject.personJobTitle == null || requestObject.personJobTitle == '') && (requestObject.irbExemptForm.personId != null && requestObject.irbExemptForm.personId != '')" class="fa fa-exclamation-circle" aria-hidden="true"></i>
						</div>
						<div class="col-4 width-exempt searchBox display">
						<input class="form-control" type="text" *ngIf="!continueBtnClicked" (input)="clearSelectedPIdata()" [(ngModel)]="requestObject.irbExemptForm.personName"
						(keydown.arrowdown) ="keyPressEvent.onKeyDown($event,'pIDropDown')" (keydown.arrowup) ="keyPressEvent.onKeyDown($event,'pIDropDown')" (keydown.Enter) ="onKeyEnterElastic('pIDropDown')" 
						placeholder="Search: PI Name" [formControl]="piSearchText" (focus)="IsElasticResultPI = true" (focusout)="IsElasticResultPI = false"
						/>
						<input class="form-control" type="text" [disabled]="continueBtnClicked" [(ngModel)]="requestObject.irbExemptForm.personName" *ngIf="continueBtnClicked"
						/>
						<div class="sb-seachresults results-margin" id="pIDropDown">
							<ul class="sb-results-dropdown-menu test" *ngIf="IsElasticResultPI">
								<li *ngFor="let result of _results | async" (mousedown)="selectedPiResult(result)" (click)="selectedPiResult(result)">
									<span [innerHTML]="result.label"></span>
								</li>
							</ul>
						</div>
						</div>
						<div class="col-1 title-head">
							<h4>Unit:</h4>
						</div>
						<div class="col-4 width-exempt searchBox display">
							<ng2-completer [(ngModel)]="requestObject.irbExemptForm.unitName" [inputClass]="'form-control'" placeholder="Search: Department Unit"
							 *ngIf="!isViewMode" [datasource]="unitName" [minSearchLength]="0" (ngModelChange)="unitChangeFunction(requestObject.irbExemptForm.unitName)"
							 (selected)="onUnitSelect()"></ng2-completer>
							<input class="form-control unit-margin" type="text" [disabled]="isViewMode" [(ngModel)]="requestObject.irbExemptForm.unitName"
							 *ngIf="isViewMode" />
						</div>
					</div>
				</div>
				<!--Text change Ends-->

				<div class="col-12 apprve-date mt-0">
					<div class="row">
						<div class="col-2 title-head pl-15" [ngClass]="{'invalid':invalidData.invalidExemptData && (requestObject.exemptProtocolStartDate == null || requestObject.exemptProtocolStartDate == '')}">
							<h4>* Start Date:</h4>
						</div>
						<div class="col-4 width-exempt searchBox display">
							<div class="input-group">
								<input [min]="todayDate" [disabled]="isViewMode" class="form-control datePickerRadius width-date" [owlDateTime]="dt4" placeholder="mm/dd/yyyy"
								 [(ngModel)]="requestObject.exemptProtocolStartDate" (ngModelChange)="validateStartDate()">
								<owl-date-time [pickerType]="'calendar'" #dt4></owl-date-time>
								<span title="Choose Start Date" class="input-span-1 input-group-text" [owlDateTimeTrigger]="dt4">
									<i class="fa fa-calendar" aria-hidden="true"></i>
								</span>
							</div>
							<span *ngIf="invalidData.invalidStartDate" class="error">Start Date should be less than End Date</span>
						</div>
						<div class="col-1 title-head " [ngClass]="{'invalid':invalidData.invalidExemptData && (requestObject.exemptProtocolEndDate == null || requestObject.exemptProtocolEndDate == '')}">
							<h4>* End Date:</h4>
						</div>
						<div class="col-4 width-exempt searchBox display">
							<div class="input-group">
								<input [min]="todayDate" [disabled]="isViewMode" class="form-control datePickerRadius margin-6 width-date" [owlDateTime]="dt3" placeholder="mm/dd/yyyy"
								 [(ngModel)]="requestObject.exemptProtocolEndDate" (ngModelChange)="validateEndDate()">
								<owl-date-time [pickerType]="'calendar'" #dt3></owl-date-time>
								<span title="Choose End Date" class="input-span-1 input-group-text" [owlDateTimeTrigger]="dt3">
									<i class="fa fa-calendar" aria-hidden="true"></i>
								</span>
							</div>
							<span *ngIf="invalidData.invalidEndDate" class="error">End Date should be greater than Start Date</span>
						</div>
					</div>
				</div>
				<!-- <div class="col-12">
					<div class="row">
					<div class="col-6">
						<span *ngIf="invalidData.invalidEndDate" class="error">Start Date should be less than End Date</span>
					 </div>
					<div class="col-6">
							<span *ngIf="invalidData.invalidEndDate" class="error">Start Date should be less than End Date</span>
				 </div>
				</div>
				</div> -->
				<div class="col-12 apprve-date mt-0">
					<div class="row">
						<div class="col-2 title-head pl-15">
							<h4 style="display: inline-block;" class="sponsorFont">Faculty Sponsor:</h4>
							<i title="{{requestObject.irbExemptForm.facultySponsorPerson}} may not have PI Status." *ngIf="(requestObject.facultySponsorJobTitle == null || requestObject.facultySponsorJobTitle == '') && (requestObject.irbExemptForm.facultySponsorPersonId != null && requestObject.irbExemptForm.facultySponsorPersonId != '')" class="fa fa-exclamation-circle" aria-hidden="true"></i>
						</div>
						<div class="col-4  width-exempt searchBox display">
						<input class="form-control" type="text" *ngIf="!isViewMode" (input)="clearSelectedFacultydata()" [(ngModel)]="requestObject.irbExemptForm.facultySponsorPerson"
						(keydown.arrowdown) ="keyPressEvent.onKeyDown($event,'facultySponsorDropDown')" (keydown.arrowup) ="keyPressEvent.onKeyDown($event,'facultySponsorDropDown')" (keydown.Enter) ="onKeyEnterElastic('facultySponsorDropDown')"
						placeholder="Search: Faculty Sponsor Name" [formControl]="facultySearchText" (focus)="IsElasticResultFaculty = true"
						 (focusout)="IsElasticResultFaculty = false" />
						<input class="form-control" type="text" [disabled]="isViewMode" [(ngModel)]="requestObject.irbExemptForm.facultySponsorPerson"
						 *ngIf="isViewMode" />
						<div class="sb-seachresults results-margin" id="facultySponsorDropDown">
							<ul class="sb-results-dropdown-menu test" *ngIf="IsElasticResultFaculty">
								<li *ngFor="let result of _results | async" (mousedown)="selectedFacultyResult(result)" (click)="selectedFacultyResult(result)">
									<span [innerHTML]="result.label"></span>
								</li>
							</ul>
						</div>
					</div>
					</div>
				</div>
				<div class="col-12 apprve-date mt-0">
					<div class="row">
						<div class="col-2 title-head pl-15" [ngClass]="{'invalid':invalidData.invalidExemptData && (requestObject.irbExemptForm.summary == null || requestObject.irbExemptForm.summary == '')}">
							<h4>* Summary:</h4>
						</div>
						<div class="col-9 width-exempt searchBox dsp-flex">
							<textarea class="form-control" [disabled]="isViewMode" rows="3" maxlength="1250" [(ngModel)]="requestObject.irbExemptForm.summary"
							 placeholder="Use this field to summarize your research. This description should be written in lay language. Include a brief description of the purpose of your reasearch along with the experimental procedures. This text should not exceed 1250 characters."></textarea>
						</div>
					</div>
					<div *ngIf="!isViewMode" class="col-12 exempt-id">
						<button [hidden]="showQuestionaire" id="#continueBtn" class="btn mb-3 btn-primary tab_btn center-button" (click)="loadQuestionaire()"
						 data-toggle="modal" data-target="#alertModal" [disabled]="disableButton">Continue</button>
					</div>
				</div>
				<!--new end-->
			</div>
		</div>
	</section>
</div>
<div class="container-fluid" *ngIf="showQuestionaire">
	<div class="row">
		<!--collapse-->
		<div class="col-12">
			<div class="card coll-card-q">
				<h5 class="card-header collapse_hd">
					Exempt Form
					<i class="fa fa-info-circle pdf" aria-hidden="true" (click)="isStayOnSamePage = true" data-toggle="modal" data-target="#welcomeModal"></i>
				</h5>
				<div class="card-body collapse-card-body">
					<div class="quest-no" *ngFor=' let questionIndex of questionaire.questionnaireQuestions; let indexQuestion = index'>
						<ul [ngSwitch]="questionIndex.answerType" class="list">
							<li *ngSwitchCase="'Radio'">
								<div class="row category-margin" *ngIf="questionIndex.groupLabel!==null && questionIndex.showQuestion == true">
									<div class="col-12 col-sm-12 col-md-12 pl-0">
										<p class="category">{{questionIndex.groupLabel}}</p>
									</div>
								</div>
								<div *ngIf="questionIndex.showQuestion == true" class="list" [ngClass]="{'errorquestion': showEvaluateMessageById(questionIndex.questionId)}">
									<p>
										{{questionIndex.question}}
										<span class="help-link">
											<i class="fa fa-lightbulb-o" (click)="getHelpLink(questionIndex.description, indexQuestion)"></i>
										</span>
									</p>
									<div *ngFor=" let option of questionaire.questionnaireOptions; let in=index" class="radio-inline ">
										<span *ngIf="questionIndex.questionId == option.QUESTION_ID">
											<input [disabled]="isViewMode" type="radio" name="{{option.QUESTION_ID}}" [value]="option.OPTION_LABEL" (change)="showChildQuestions(questionIndex)"
											 [(ngModel)]="questionIndex.selectedAnswer" /> {{option.OPTION_LABEL}}
										</span>
									</div>
									<div class="row category-margin" *ngIf="showHelpMsg[indexQuestion] == true">
										<div class="col-12 col-sm-12 col-md-12 pl-0 helpCard">
											<button class="closeResultCard close-help" (click)="getHelpLink(questionIndex.description, indexQuestion)">
												<i class="fa fa-times"></i>
											</button>
											<div class="helpMsg">
												<label [innerHTML]="helpMsg[indexQuestion]"></label>
											</div>
										</div>
									</div>
								</div>
							</li>
						</ul>
					</div>
					
					<div class="col-12" *ngIf="QuestionnaireCompletionFlag=='Y' && isQuestionnaireContinueClicked == false && isViewMode == false">
						<div class="alert alert-info continue-click-alert">
							{{QUESTIONNAIRE_COMPLETE_MESSAGE}}
						</div>
						</div>
					<div *ngIf="isEvaluate" class="col-12 eval-msg">
						<p class="alignLeft" [ngClass]="{'is-exempt-message':isExempt=='Y' || isExempt=='O',
							'not-exempt-message':isExempt=='N'}">
							<span class="danger">
								<i class="fa" [ngClass]="{'fa-star':isExempt=='Y' || isExempt=='O',
							'fa-warning':isExempt=='N'}" class="fa fa-star"></i>
							</span>
							{{alertMsg}}
							<span *ngIf="showEvaluateWarning!=''">
								<br/>
								<i class="fa" [ngClass]="{'fa-star':isExempt=='Y' || isExempt=='O',
								'fa-warning':isExempt=='N'}" class="fa fa-star"></i>
								<span [innerHTML]="showEvaluateWarning"></span>
							</span>
						</p>
					</div>
				</div>
			</div>
			<div class="container-fluid">
				<section class="row btn-row-med sect-padding">
					<button class="btn btn-primary " type="submit" *ngIf="isViewMode == false && isQuestionnaireContinueClicked == false" (click)="evaluateExemptQuestionnaire()" [ngClass]="QuestionnaireCompletionFlag=='N'? '':'tab_btn'"
						[disabled]="QuestionnaireCompletionFlag=='N'">Continue</button>
						<button class="btn submit-btn" data-toggle="modal" data-target="#confirmModal" type="submit" *ngIf="isViewMode == false && isQuestionnaireContinueClicked == true"
					 (click)="submitConfirmation()" [ngClass]="QuestionnaireCompletionFlag=='N'? '':'submit_btn'" [disabled]="QuestionnaireCompletionFlag=='N'">Submit</button>
					 <button class="btn btn-primary tab_btn" (click)="openActionLogModal()" type="submit" data-toggle="modal" data-target="#routeActionLogModal"
					 id="actionLog">Action Log</button>
					 <button class="btn btn-primary tab_btn" *ngIf="isViewMode == false" (click)="saveQuestionaire()" id="save">Save</button>
					 <button class="btn btn-primary tab_btn" data-toggle="modal" data-target="#approveRejectActionConfirmModal" type="submit"
					 *ngIf="isViewMode == false && isActionByPi == true" (click)="returnQuestionnaireClick()" [disabled]="QuestionnaireCompletionFlag=='N'">Return</button>
					 <button class="btn btn-primary tab_btn" *ngIf="isViewMode == true && isPendingActionRequired" (click)="approveQuestionnireClick()"
					 data-toggle="modal" data-dismiss="modal" data-target="#approveRejectActionConfirmModal" id="approve">Approve</button>
					<button class="btn btn-primary tab_btn" *ngIf="isViewMode == true && isPendingActionRequired" (click)="rejectQuestionnireClick()"
					 data-toggle="modal" data-dismiss="modal" data-target="#approveRejectActionConfirmModal" id="reject">Reject</button>
					 <button *ngIf="userDTO.role == 'ADMIN' || userDTO.role == 'CHAIR'" class="btn btn-primary tab_btn" data-toggle="modal" data-target="#checklistModal"
					 type="submit" (click)="showAddAttachmentPopUp($event)">Add/View Checklist</button>
					<!-- <div class="exit-button mg-left" style="display: inline;margin-left: 0">
						<button type="button" style="margin-left: 0" class="btn btn-warning" (click)="returnToExemptList($event)" title="Close">
							<i class="fa fa-times">&nbsp;</i>Exit</button>
					</div> -->
					<button class="btn btn-primary tab_btn" *ngIf="isViewMode == false" (click)="returnToExemptList2($event)" title="Save and Close">Exit</button>
					
				</section>
			</div>
		</div>
	</div>
</div>
<!-- message-modal -->
<div class="modal fade" id="alertModal" tabindex="-1" role="dialog" aria-labelledby="alertModalCenterTitle" aria-hidden="true"
 *ngIf="showAlert">
	<!-- alert modals-->
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header popup-header">
				<h5 class="modal-title" id="exampleModalLongTitle">{{modalHeading}}</h5>
				<button type="button" class="close modal-close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body modal-popup">
				<!-- section1 -->
				<div class="modal-padding">
					<div class="row">
						<div class="col-md-12 col-12 lg-12 col-sm-12 col-12">
							<h4 class="popup-sub-head questionnaire-popups">{{alertMsg}}</h4>
						</div>
					</div>
				</div>
				<section class="row btn-row-med sect-confirm-padding" *ngIf="showContinueButton">
					<button class="btn btn-primary tab_btn" (click)="continueWithQstnr()" aria-label="Close">Continue</button>
					<button class="btn btn-primary tab_btn" (click)="continueWithDashboard()" aria-label="Close">Exit to Dashboard</button>
				</section>
				<section class="row btn-row-med sect-confirm-padding proceed-btn-align" *ngIf="!showContinueButton">
					<button class="btn tab_btn" data-dismiss="modal" aria-label="Close">Close</button>
				</section>
			</div>
		</div>
	</div>
	<!-- alert modals end-->
</div>
<!-- message-modal-end -->
<!--confirmation modal-->
<div class="modal fade" id="confirmModal" tabindex="-1" role="dialog" aria-labelledby="helpModalCenterTitle" aria-hidden="true"
 data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header popup-header">
				<h5 class="modal-title" id="exampleModalLongTitle">Confirmation</h5>
				<button type="button" class="close modal-close" data-dismiss="modal" aria-label="Close" (click)="closeConfirmation()">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body modal-popup">
				<!-- section1 -->
				<div class="modal-padding">
					<div class="row">
						<div class="col-md-12 col-12 lg-12 col-sm-12 col-12 font-size-15">
							<p class="confirm-text">
								<!-- <input type="checkbox" #agreeCheckbox="ngModel" [(ngModel)]="isChecked" (change)="0"> -->
								<input *ngIf="showConfirmationDetails" type="checkbox" [(ngModel)]="piDeclaration.isConfirmationChecked">
								<span class="col-12 confirm-text-padding" [innerHTML]="PI_DECLARATION_COMPLETE"></span>
							</p>
							<p class="confirm-text">
								<input *ngIf="showConfirmationDetails" type="checkbox" [(ngModel)]="piDeclaration.isAgreePoliciesChecked">
								<span class="col-12 confirm-text-padding" [innerHTML]="PI_DECLARATION_AGREE_POLICIES"></span>
							</p>
							<p class="confirm-text">
								<input *ngIf="showConfirmationDetails" type="checkbox" [(ngModel)]="piDeclaration.isMemberResponsibilityChecked">
								<span class="col-12 confirm-text-padding" [innerHTML]="PI_DECLARATION_MEMBER_RESPONSIBILITY"></span>
							</p>
							<p class="confirm-text">
								<input *ngIf="showConfirmationDetails" type="checkbox" [(ngModel)]="piDeclaration.isComprehensiveReviewChecked">
								<span class="col-12 confirm-text-padding" [innerHTML]="PI_DECLARATION_COMPREHENSIVE_REVIEW"></span>
							</p>
						</div>
					</div>
				</div>
			</div>
			<section class="row btn-row-med sect-confirm-padding">
				<button class="btn btn-primary tab_btn" data-dismiss="modal" aria-label="Close" (click)="submitQuestionaire()" *ngIf="piDeclaration.isConfirmationChecked == true && piDeclaration.isAgreePoliciesChecked == true && piDeclaration.isMemberResponsibilityChecked && piDeclaration.isComprehensiveReviewChecked == true && showConfirmationDetails == true">Agree</button>
				<button class="btn tab_btn" data-dismiss="modal" aria-label="Close" (click)="closeConfirmation()">Close</button>
			</section>
		</div>
	</div>
</div>
<!-- confirmation modal end-->
<!--welcome message modal-->
<div class="modal fade" id="welcomeModal" tabindex="-1" role="dialog" aria-labelledby="helpModalCenterTitle" aria-hidden="true"
 data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog modal-full" role="document">
		<div class="modal-content">
			<div class="modal-header popup-header">
				<div class="col-md-12 col-12 lg-12 col-sm-12 col-12">
					<h5 class="align modal-title" id="welcomeModalLongTitle">Exempt Evaluation Overview
					<button type="button" *ngIf="!isStayOnSamePage" class="close modal-close" data-dismiss="modal" (click)="returnToExemptList($event)" aria-label="Close">
							<span aria-hidden="true">&times;</span>
					</button>
					<button type="button" *ngIf="isStayOnSamePage" class="close modal-close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
					</button></h5>
				</div>
			</div>
			<div class="modal-body modal-popup pb-0">
				<!-- section1 -->
				<div class="modal-padding pb-0">
					<div class="row">
						<div class="col-md-12 col-12 lg-12 col-sm-12 col-12">
							<h4 class="popup-sub-head questionnaire-popups">
								<div class="welcome-text">
									The Exempt Evaluation will guide you in determining if your research is exempt from regulations listed in the 
									<a href="https://www.hhs.gov/ohrp/regulations-and-policy/index.html" target="_blank">Common Rule.</a>
									<br> Key elements:
									<table class="welcome-table">
										<tbody class="welcome-table-border">
											<tr>
												<td>
													<i class="fa fa-info-circle" aria-hidden="true"></i>
												</td>
												<td >Investigators are required to follow responsibilities and guidance as outlined in the Investigator Responsibility
													Guidelines. Visit
													<a href="http://couhes.mit.edu/" target="_blank">http://couhes.mit.edu/</a> for more information.
												</td>
											</tr>
											<tr>
												<td>
													<i class="fa fa-info-circle" aria-hidden="true"></i>
												</td>
												<td >Principal Investigators and Faculty Sponsors must ensure all members of the research team comply with the Investigator
													Responsibilities for Exempt Research.</td>
											</tr>
											<tr>
												<td>
													<i class="fa fa-info-circle" aria-hidden="true"></i>
												</td>
												<td >Completion of the Exempt Evaluation prior to the start of the research is mandatory.</td>
											</tr>
										</tbody>
									</table>
									<br>
									Any human subject research conducted under the auspices of MIT is subject to audit.
									<br>
									<br> Please review each question carefully and respond truthfully. If you are unsure, you can save your progress and
									return to the question later. Incomplete evaluations cannot be submitted.
									<br>
									<br> Guidance is available throughout the evaluation and with more detail available on the COUHES website
									<a href="http://couhes.mit.edu/" target="_blank">http://couhes.mit.edu/</a>. For questions or clarification, please contact the COUHES office:
									<br>
									<br>
									<div class="row">
										<div class="col-4"></div>
										<div class="col-2 welcome-text-color">
											<i class="fa fa-phone-square" aria-hidden="true"></i> 617-253-6787
										</div>
										<div class="col-5">
											<i class="fa fa-envelope welcome-text-color" aria-hidden="true"></i>
											<a href="mailto:couhes@mit.edu" target="_top">couhes@mit.edu</a>
										</div>
									</div>
								</div>
							</h4>
						</div>
					</div>
				</div>
			</div>
			<section class="row btn-row-med sect-confirm-padding proceed-btn-align mg-top">
				<button class="btn btn-primary tab_btn" *ngIf="!isStayOnSamePage" data-dismiss="modal" aria-label="Close" (click)="closeWelcome()">Proceed</button>
				<button class="btn tab_btn" *ngIf="!isStayOnSamePage" data-dismiss="modal" aria-label="Close" (click)="returnToExemptList($event)">Cancel</button>
				<button class="btn tab_btn" *ngIf="isStayOnSamePage" data-dismiss="modal" aria-label="Close">Close</button>
			</section>
		</div>
	</div>
</div>
<!-- welcome message modal end-->

<!--checklist modal-->
<div class="modal fade" id="checklistModal" tabindex="-1" role="dialog" aria-labelledby="helpModalCenterTitle" aria-hidden="true"
 data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog modal-full" role="document">
		<div class="modal-content">
			<div class="modal-header popup-header">
				<h5 class="modal-title" id="exampleModalLongTitle">Add CheckList</h5>
				<button type="button" class="close modal-close" data-dismiss="modal" (click)="closeAttachments()" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body modal-popup">
				<!-- section1 -->
				<div class="modal-padding">
					<div class="row">
						<div class="col-md-12 col-12 lg-12 col-sm-12 col-12">


							<table>
								<tr class="form-group">
									<td>
										<label class="label-color">*Description</label>
									</td>
									<td>
										<textarea class="form-control txt-area-fnt modal-table-padding modal-desc-width" placeholder="Description" [(ngModel)]="attachmentDescription"></textarea>
									</td>
								</tr>
							</table>
							<span *ngIf="isEmptyCheckListDescr" class="desc-warning">* Please provide checklist description to proceed</span>

							<file-drop customstyle="file-drop-color" (onFileDrop)="dropped($event)" (onFileOver)="fileOver($event)" (onFileLeave)="fileLeave($event)">
								<button class="btnSkin btnSkinPrimary mt-40" (click)="triggerAdd()">Choose Files
								</button>
								<input type="file" #file (change)="onChange(file.files)" multiple id="addAttach" style="display: none" />
								<div style="color: #a92034; margin-left: 10px;  margin-top: 40px;">OR Drop files here
								</div>

							</file-drop>
							<span *ngIf="isDuplicate" class="desc-warning">*File already choosen. Please choose a different one</span>
							<div class="filechip">
								<span *ngFor="let item of uploadedFile; let i=index">{{ item.name }}
									<i class="fa fa-close pdf" (click)="deleteFromUploadedFileList(item)"></i>
								</span>
							</div>

						</div>
					</div>
				</div>
			</div>
			<section class="row btn-row-med sect-confirm-padding proceed-btn-align">
				<button class="btn btn-primary tab_btn proceed-btn" aria-label="Close" (click)="addAttachments()">Add</button>
			</section>
			<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
				<div class="borderBox box-shawdow">

					<table *ngIf="exemptAttachmentObject.length !== 0" class="table table-striped table-type-head">
						<thead class="popup-sub-header">
							<tr>
								<th scope="col" title="">Description</th>
								<th scope="col" title="">File Name</th>
								<th scope="col" title="">Action</th>
							</tr>
						</thead>
						<tbody class="tdy-color">
							<tr *ngFor="let attachments of exemptAttachmentObject; let i=index">

								<td>
									<input [class.poping-border]="editScheduleattachment[i] == true" class="form-control" type="text" [ngClass]="(!editScheduleattachment[i] == false)? 'checklistEditable' : 'checklistDescNotEditable'"
									 [disabled]="!editScheduleattachment[i] == true" [(ngModel)]="attachments.DESCRIPTION">
								</td>
								<td>{{attachments.FILENAME}}</td>
								<td>
									<ul class="actionButtonGroup">
										<li>
											<a (click)="tempSave($event,attachments)" title="Delete {{attachments.EXEMPT_FORM_CHECKLST_ID}}" data-toggle="modal" data-target="#deleteAttachment">
												<i class="fa fa-trash-o delete-color"></i>
											</a>
										</li>
										<li>
											<a (click)="downloadAttachements($event, attachments)" title="Open{{attachments.EXEMPT_FORM_CHECKLST_ID}}">
												<i class="fa fa-download download-color" aria-hidden="true"></i>
											</a>
										</li>
										<li>
											<a *ngIf="!editScheduleattachment[i] == true" (click)="editAttachments($event,i, attachments)">
												<i class="fa fa-edit edit-color"></i>
											</a>
										</li>
										<li>
											<a *ngIf="!editScheduleattachment[i] == false" href="#" (click)="saveEditedattachments($event,i, attachments)">
												<i class="fa fa-floppy-o save-color" aria-hidden="true"></i>
											</a>
										</li>
										<li>
											<a *ngIf="!editScheduleattachment[i] == false" href="#" (click)="cancelEditedattachments($event,i, attachments)">
												<i class="fa fa-times cancel-color" aria-hidden="true"></i>
											</a>
										</li>
									</ul>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>

		</div>
	</div>
</div>
<!--checklist modal ends-->

<!-- delete warning modal -->
<div class="modal fade mySkinDialog modalFallBack" *ngIf="showPopup" id="deleteAttachment" tabindex="-1" role="dialog" aria-labelledby="deleteModalTitle"
 aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered" role="document">
		<div class="modal-content modal-text-color">
			<div class="modal-header popup-header">
				<h5 class="modal-title modal-text-color">Want to delete?</h5>

				<button type="button" class="close modal-close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<p>Are you sure you want to delete this item?</p>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn pop-up-color tab_btn proceed-btn pdf" data-dismiss="modal" data-toggle="modal" (click)="showPopup = false">No</button>
				<button type="button" class="btn pop-up-color tab_btn proceed-btn pdf" (click)="deleteAttachments($event)" data-dismiss="modal">Yes</button>
			</div>
		</div>
	</div>
</div>
<!-- delete warning modal ends -->

<!-- modal butoon hidden dont change -->
<button id="openModalButton" [hidden]="true" data-toggle="modal" data-target="#alertModal"></button>
<!-- end -->
<!-- modal butoon hidden for welcome message -->
<button id="openWelocomeModalButton" [hidden]="true" data-toggle="modal" data-target="#welcomeModal"></button>
<!-- end -->

<!-- stk -->
<!-- modal butoon hidden dont change -->
<button id="openWarningModalButton" [hidden]="true" data-toggle="modal" data-target="#alertWarningModal"></button>
<!-- end -->
<!-- message-modal -->
<div class="modal fade" id="alertWarningModal" tabindex="-1" role="dialog" aria-labelledby="alertModalCenterTitle" aria-hidden="true"
 *ngIf="showWarningAlert">
	<!-- alert modals-->
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header popup-header">
				<h5 class="modal-title" id="exampleModalLongTitle">{{modalHeading}}</h5>
				<button type="button" class="close modal-close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body modal-popup">
				<!-- section1 -->
				<div class="modal-padding">
					<div class="row">
						<div class="col-md-12 col-12 lg-12 col-sm-12 col-12">
							<h4 class="popup-sub-head questionnaire-popups">
								<p [innerHTML]="alertMsg"></p>
							</h4>
						</div>
					</div>
				</div>
			</div>
			<section class="row btn-row-med sect-warning-padding proceed-btn-align">
				<button class="btn mb-3 btn-primary tab_btn" data-dismiss="modal" aria-label="Close" (click)="proceedWithWarning()">Proceed</button>
				<button class="btn mb-3 btn-primary tab_btn" data-dismiss="modal" aria-label="Close">Close</button>
			</section>
			<section class="row btn-row-med sect-confirm-padding proceed-btn-align" *ngIf="!showContinueButton">
				<button class="btn tab_btn" data-dismiss="modal" aria-label="Close">Close</button>
			</section>
		</div>
	</div>
	<!-- alert modals end-->
</div>
<!-- message-modal-end -->

<!--action log modal-->

<div class="modal fade" id="routeActionLogModal" tabindex="-1" role="dialog" aria-labelledby="actionLogModal" aria-hidden="true">
	<!-- alert modals-->
	<div class="modal-dialog modal-dialog-Action" role="document">
		<div class="modal-content">
			<div class="modal-header popup-header">
				<h5 class="modal-title" id="exampleModalLongTitle">Action Log</h5>
				<button type="button" class="close modal-close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<!--body-->
			<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 viewMode viewModeActionLog resultCard resultCardBefore">
				<div class="row cardColor-1">
					<div class="col-xl-4 col-lg-4 col-md-6 col-sm-6 col-6">
						<label>
							<b>Exempt Form #</b>
						</label>
						<span>{{actionLogResult?.irbExemptForm?.exemptFormID}}</span>
					</div>

					<div class="col-xl-4 col-lg-4 col-md-6 col-sm-6 col-6">
						<label>
							<b>Status</b>
						</label>
						<span>{{actionLogResult?.irbExemptForm?.status}}</span>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-6 col-sm-6 col-6">
						<label>
							<b>PI</b>
						</label>
						<span>{{actionLogResult?.irbExemptForm?.personName}}</span>
					</div>
					<div class="col-xl-12 col-lg-12 col-md-6 col-sm-6 col-6">
						<label>
							<b>Title</b>
						</label>
						<span>{{actionLogResult?.irbExemptForm?.exemptTitle}}</span>
					</div>
				</div>
			</div>
			<div class="row" *ngIf="finalStatus != null">
				<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
					<label class="routeLogStatus">finalStatus</label>
				</div>
			</div>
			<div class="borderBox col-12 cardTable pad-Bottom0">
				<div class="pullSide">
					<table class="table" id="routeLogTable">
						<thead class="tbl-head-clr thead-font-size cardThead">
							<th>Actions</th>
							<th>Status</th>
							<th>Comments</th>
							<th>Action Taken</th>
						</thead>
						<tr class="cardTr" *ngFor="let logItem of actionLogResult.actionLogs;let i = index">
							<td>{{logItem?.ACTION_TYPE}}
							</td>
							<td>{{logItem?.EXEMPT_STATUS}}
							</td>
							<td class="wComment" title="{{logItem?.COMMENTS}}">{{ (logItem?.COMMENTS?.length>100)? (logItem?.COMMENTS | slice:0:100)+'...':(logItem?.COMMENTS) }}
							</td>
							<td>
								<b>{{logItem?.UPDATE_USER}} </b>
								<br/> On {{logItem?.UPDATE_TIMESTAMP}}</td>

						</tr>
					</table>
				</div>
				<section class="row btn-row-med sect-warning-padding proceed-btn-align">
						<button class="btn tab_btn" data-dismiss="modal" aria-label="Close">Close</button>
				</section>
			</div>
		</div>
	</div>

</div>

<!--end action log modal-->

<!-- start approveRejectActionConfirmModal-->
<div class="modal fade" id="approveRejectActionConfirmModal" tabindex="-1" role="dialog" aria-labelledby="alertModalCenterTitle"
 aria-hidden="true">
	<!-- alert modals-->
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header popup-header">
				<h5 class="modal-title" id="exampleModalLongTitle">{{ApproveRejectHeader}}</h5>
				<button type="button" class="close modal-close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body modal-popup">
				<!-- section1 -->
				<div class="modal-padding">
					<div class="row">
						<div class="col-md-12 col-12 lg-12 col-sm-12 col-12">
							<h4 style="text-align: left;" class="popup-sub-head questionnaire-popups">Please provide your comments</h4>
						</div>
						<div class="col-md-12 col-12 lg-12 col-sm-12 col-12">
							<textarea class="w100" rows="3" maxlength="1250" placeholder="Add Comment" [(ngModel)]="requestObject.irbExemptForm.comment"></textarea>
						</div>
					</div>
				</div>
			</div>
			<section class="row btn-row-med sect-confirm-padding proceed-btn-align">
				<button data-toggle="modal" class="btn btn-primary tab_btn proceed-btn" data-dismiss="modal" *ngIf="isApprovedAlert" aria-label="Close"
				 (click)="approveConfirmClick()">Approve</button>
				<button data-toggle="modal" class="btn btn-primary tab_btn proceed-btn" data-dismiss="modal" *ngIf="isRejectedAlert" aria-label="Close"
				 (click)="rejectConfirmClick()">Reject</button>
				<button data-toggle="modal" class="btn btn-primary tab_btn proceed-btn" data-dismiss="modal" *ngIf="isReturnAlert" aria-label="Close"
				 (click)="returnConfirmClick()">Return</button>
				<button data-toggle="modal" class="btn btn-primary tab_btn proceed-btn" data-dismiss="modal" aria-label="Close">Close</button>
			</section>
		</div>
	</div>
	<!-- alert modals end-->
</div>
<!-- end approveRejectActionConfirmModal-->