<div class="container-fluid">
  <div class="row">
    <div class="col-12">
      <div class="card history-card border-radius-1">
        <div class="card-header history-header">
          <nav class="nav navbar-pg3">
            <h5>Attachments</h5>
            <i class="fa fa-info-circle" aria-hidden="true"></i>
          </nav>
        </div>
      </div>
      <div class="card-body card-paddng">
        <div class="col-12  search-eidted-p padding-15">
          <div class="row">
            <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
              <!-- <a href="#" title="add new attachment" class="addTextBtn" (click)="showAddAttachmentPopUp($event)"
                data-toggle="modal" data-target="#addAttachment">
                <i class="fa fa-plus"></i>&nbsp;
                <span>Add Attachment</span>
              </a> -->
             
                <div class="row">
                  <div class="col-md-12 col-12 lg-12 col-sm-12 col-12">
                    <h4 class="popup-sub-head">
  
                      
                        <div class="row col-12 form-group">
                          <div class="col-4"><label>*Type</label>
                              <select class="custom-select mr-sm-2" id="inlineFormCustomSelect" [(ngModel)]="requestObject.attachmentType">
                              <option selected>Type</option>
                              <option value="1">One</option>
                              <option value="2">Two</option>
                              <option value="3">Three</option>
                            </select></div>
                            
                         <div class= "col-8">
                            <label class="ml-10">*Description</label>
                         
                            <textarea rows="1" cols="2"class="form-control txt-area-fnt modal-table-padding " placeholder="Description" [(ngModel)]="requestObject.attachmentDescription"></textarea>
                          </div>
                        </div>
                    
                      <span *ngIf="!isMandatoryFilled" class="desc-warning">* Please provide Mandatory Fields to proceed</span>

                      <file-drop customstyle="file-drop-color" headertext="Drop files here" (onFileDrop)="dropped($event)" (onFileOver)="fileOver($event)"
                        (onFileLeave)="fileLeave($event)">
                        <input type="file" #file (change)="onChange(file.files)" multiple /> OR &nbsp;&nbsp;
                      </file-drop>
                      <span *ngIf="isDuplicate" class="desc-warning">*File already choosen. Please choose a different one</span>
                      <ul class="ul-style">
                        <li *ngFor="let item of uploadedFile; let i=index">
                          <span>{{ item.name }}----------------</span>
                          <i class="fa fa-trash-o pdf" (click)="deleteFromUploadedFileList(item)"></i>
                        </li>
                      </ul>
                    </h4>
                  </div>
                </div>
            </div>
            <section class="row btn-row-med sect-confirm-padding proceed-btn-align ml-600">
              <button class="btn btn-primary tab_btn proceed-btn inner-tab-btn" aria-label="Close" (click)="addAttachments()">Add</button>
              <!-- <button class="btn btn-primary tab_btn proceed-btn inner-tab-btn" aria-label="Close" (click)="closeAttachments()" data-dismiss="modal" >Close</button> -->
            </section>
        
          <div class="col-12 mt-10">
            <div class="table-responsive" *ngIf="!noIrbAttachments">
              	<div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="sortOrder"
                      [(ngModel)]="sortOrder" (ngModelChange)="sortBy()"
                      id="inlineCheckbox1" value="-1"> <label
                      class="form-check-label radio-label" for="inlineCheckbox1">ASC</label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" id="inlineCheckbox2"
                      [(ngModel)]="sortOrder" name="sortOrder"
                      (ngModelChange)="sortBy()" value="1"> <label
                      class="form-check-label radio-label" for="inlineCheckbox2">DSC</label>
                  </div>
                  <div class="form-check form-check-inline">
                    <select class="custom-select mr-sm-2" [(ngModel)]="sortField"
                      (ngModelChange)="sortBy()" id="inlineFormCustomSelect">
                      <option value="UPDATE_TIMESTAMP">UPDATE TIMESTAMP</option>
                      <option value="ATTACHMENT_TYPE">ATTACHMENT TYPE</option>
                    </select>
                  </div>
                </div>
              <table class="table table-striped table-type-head">
                <thead>
                  <tr>
                    <th scope="col">Type</th>
                    <th scope="col">Description</th>
                    <th scope="col">File</th>
                    <th scope="col">Action</th>
                    <th scope="col">Updated By</th>

                  </tr>
                </thead>
                <tbody class="tdy-color">
                  <tr *ngFor="let attachments of irbAttachmentsList | orderBy: {property: column, direction: direction}; let i = index">
                    <td scope="row">{{attachments.ATTACHMENT_TYPE}}</td>
                    <td>{{attachments.DESCRIPTION}}</td>
                    <td>{{attachments.FILE_NAME}} </td>
                    <td>
                      <ul class="actionButtonGroup">
                        <li>
                          <a (click)="tempSave($event,attachments)" title="Delete {{attachments.FILE_ID}}" data-toggle="modal" data-target="#deleteAttachment">
                            <i class="fa fa-trash-o"></i>
                          </a>
                        </li>
                        <li>
                          <a (click)="downloadAttachment(attachments)" title="Open{{attachments.FILE_ID}}">
                            <i class="fa fa-download" aria-hidden="true"></i>
                          </a>
                        </li>
                        <li>
                          <a *ngIf="!editAttachment[i] == true" (click)="editAttachments($event,i, attachments)">
                            <i class="fa fa-edit"></i>
                          </a>
                        </li>
                        <li><a *ngIf="!editAttachment[i] == false" href="#" (click)="saveEditedattachments($event,i, attachments)"><i class="fa fa-floppy-o" aria-hidden="true"></i></a></li>
                              <li><a *ngIf="!editAttachment[i] == false" href="#" (click)="cancelEditedattachments($event,i, attachments)"><i class="fa fa-times" aria-hidden="true"></i></a></li>
                      </ul>
                    </td>
                    <td>{{attachments.UPDATE_USER_NAME}} {{(attachments.UPDATE_TIMESTAMP ===' ' || attachments.UPDATE_TIMESTAMP
                      ===null) ? ' ':(attachments.UPDATE_TIMESTAMP | date: 'MM/dd/yyyy')}}</td>
                  </tr>
                </tbody>
              </table>
              </div>
              <div *ngIf="noIrbAttachments">
                <p>No attachments associated with this protocol.</p>
              </div>
        </div>
      </div>
    </div>
    <!-- attachment modal -->
    <!-- <div class="modal fade" id="addAttachment" tabindex="-1" role="dialog" aria-labelledby="helpModalCenterTitle" aria-hidden="true"
      data-backdrop="static" data-keyboard="false"  *ngIf="showAddAttachment">
      <div class="modal-dialog modal-full" role="document">
        <div class="modal-content">
          <div class="modal-header popup-header">
            <h5 class="modal-title" id="exampleModalLongTitle">Add Attachment</h5>
            <button type="button" class="close modal-close" data-dismiss="modal" (click)="closeAttachments()" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body modal-popup">
            <div class="modal-padding">
              <div class="row">
                <div class="col-md-12 col-12 lg-12 col-sm-12 col-12">
                  <h4 class="popup-sub-head">

                    
                      <div class="row col-12 form-group">
                        <div class="col-1"><label class="label-color">*Type</label></div>
                          <div class="col-3">
                            <select class="custom-select mr-sm-2" id="inlineFormCustomSelect" [(ngModel)]="requestObject.attachmentType">
                            <option selected>Type</option>
                            <option value="1">One</option>
                            <option value="2">Two</option>
                            <option value="3">Three</option>
                          </select></div>
                       <div class= "col-1">
                          <label class="label-color">*Description</label>
                        </div>
                        <div class="col-7">
                          <textarea class="form-control txt-area-fnt modal-table-padding modal-desc-width ml-50" placeholder="Description" [(ngModel)]="requestObject.attachmentDescription"></textarea>
                        </div>
                      </div>
                  
                    <span *ngIf="!isMandatoryFilled" class="desc-warning">* Please provide Mandatory Fields to proceed</span>

                    <file-drop customstyle="file-drop-color" headertext="Drop files here" (onFileDrop)="dropped($event)" (onFileOver)="fileOver($event)"
                      (onFileLeave)="fileLeave($event)">
                      <input type="file" #file (change)="onChange(file.files)" multiple /> OR &nbsp;&nbsp;
                    </file-drop>
                    <ul class="ul-style">
                      <li *ngFor="let item of uploadedFile; let i=index">
                        <span>{{ item.name }}----------------</span>
                        <i class="fa fa-trash-o pdf" (click)="deleteFromUploadedFileList(item)"></i>
                      </li>
                    </ul>
                  </h4>
                </div>
              </div>
            </div>
          </div>
          <section class="row btn-row-med sect-confirm-padding proceed-btn-align">
            <button class="btn btn-primary tab_btn proceed-btn inner-tab-btn" aria-label="Close" (click)="addAttachments()">Add</button>
            <button class="btn btn-primary tab_btn proceed-btn inner-tab-btn" aria-label="Close" (click)="closeAttachments()" data-dismiss="modal" >Close</button>
          </section>
        </div>
      </div>
    </div> -->
    <!-- attachment modal ends -->

  <!-- delete warning modal -->
  <div class="modal fade mySkinDialog modalFallBack" *ngIf="showPopup"
  id="deleteAttachment" tabindex="-1" role="dialog"
  aria-labelledby="deleteModalTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content modal-text-color">
      <div class="modal-header">
        <h5 class="modal-title modal-text-color">Want to delete?</h5>

        <button type="button" class="close" data-dismiss="modal"
          aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>Are you sure you want to delete this item?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn pop-up-color tab_btn proceed-btn pdf"
          data-dismiss="modal" data-toggle="modal" (click)="showPopup = false">No</button>
        <button type="button" class="btn pop-up-color tab_btn proceed-btn pdf"
          (click)="deleteAttachments($event)" data-dismiss="modal">Yes</button>
      </div>
    </div>
  </div>
</div>
  <!-- delete warning modal ends -->