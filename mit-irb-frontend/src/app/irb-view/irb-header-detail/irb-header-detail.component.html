<ngx-spinner bdOpacity=0.5 bdColor="#333" color="#fff" type="ball-spin-clockwise-fade" loadingText="Loading..."></ngx-spinner>
<div class="headerPush">
</div>
<!-- <div class="row">
	<div class="col-10"></div>
	<div class="col-2 offset-md-4 exit-button">
		<button type="button" class="btn btn-warning" (click)="backClick($event)" title="Close">
			<i class="fa fa-times">&nbsp;</i>Exit</button>
	</div>
</div> -->
<div class="container-fluid position-relative" *ngIf="irbHeaderDetails!=null && irbHeaderDetails!=undefined">
	<div class="exit-button" (click)="backClick($event)" title="Close">
		<i class="fa fa-times mg-6">&nbsp;</i>
	</div>
	<section class="row sect-padding">
		<div class="col-12 top-aprv-details">
			<div class="row">
				<div class="col-12 apprve-date">
					<div class="row">
						<div class="col-md-5 col-sm-6 col-12">
							<h4>
								IRB # :
								<span>{{irbHeaderDetails?.PROTOCOL_NUMBER}}</span>
							</h4>
							<p>
								Expiration Date :
								<span>{{irbHeaderDetails?.EXPIRATION_DATE | date: 'MM/dd/yyyy'}}</span>
								<br /> Title :
								<span>{{irbHeaderDetails?.TITLE}} </span><br /> Risk Level :
								<span>{{irbHeaderDetails?.RISK_LEVEL}} </span>
							</p>
						</div>
						<div class="col-md-4 col-sm-6 col-12">
							<p>
								Protocol Type :
								<span>{{irbHeaderDetails?.PROTOCOL_TYPE}}</span>
								<br /> Submission Status :
								<span>{{irbHeaderDetails?.SUBMISSION_STATUS}}</span>
								<br /> PI :
								<span>{{irbHeaderDetails?.PI_NAME}}</span><br /> FDA Risk Level :
								<span>{{irbHeaderDetails?.FDA_RISK_LEVEL}} </span>
							</p>
						</div>

						<div class="col-md-3 col-sm-6 col-12">
							<span class="active-en" [ngClass]="{
									'active-status': (irbHeaderDetails.PROTOCOL_STATUS_CODE=='200'||
													 irbHeaderDetails.PROTOCOL_STATUS_CODE== '201'||
													 irbHeaderDetails.PROTOCOL_STATUS_CODE== '202'||
													 irbHeaderDetails.PROTOCOL_STATUS_CODE== '901'||
													 irbHeaderDetails.PROTOCOL_STATUS_CODE== '400'||
													 irbHeaderDetails.PROTOCOL_STATUS_CODE== '401'||
													 irbHeaderDetails.PROTOCOL_STATUS_CODE== '203'),
									'in-drafts': (irbHeaderDetails.PROTOCOL_STATUS_CODE=='309'||
													 irbHeaderDetails.PROTOCOL_STATUS_CODE=='310'),
									'pending-action': (irbHeaderDetails.PROTOCOL_STATUS_CODE=='100'||
													 irbHeaderDetails.PROTOCOL_STATUS_CODE== '103'||
													 irbHeaderDetails.PROTOCOL_STATUS_CODE=='105'||
													 irbHeaderDetails.PROTOCOL_STATUS_CODE=='106'||
													 irbHeaderDetails.PROTOCOL_STATUS_CODE=='107'||
													 irbHeaderDetails.PROTOCOL_STATUS_CODE=='900'),
									'revision-required': (irbHeaderDetails.PROTOCOL_STATUS_CODE=='102'||
													 irbHeaderDetails.PROTOCOL_STATUS_CODE== '104'),
									'submitted' :   irbHeaderDetails.PROTOCOL_STATUS_CODE=='101',
									'completed-closed': (irbHeaderDetails.PROTOCOL_STATUS_CODE=='103'||
													irbHeaderDetails.PROTOCOL_STATUS_CODE== '300'||
													irbHeaderDetails.PROTOCOL_STATUS_CODE== '301'||
													irbHeaderDetails.PROTOCOL_STATUS_CODE== '304'||
													irbHeaderDetails.PROTOCOL_STATUS_CODE== '305'||
													irbHeaderDetails.PROTOCOL_STATUS_CODE== '306'||
													irbHeaderDetails.PROTOCOL_STATUS_CODE== '307'||
													irbHeaderDetails.PROTOCOL_STATUS_CODE== '313'),
								'suspended': (irbHeaderDetails.PROTOCOL_STATUS_CODE=='302'||
													irbHeaderDetails.PROTOCOL_STATUS_CODE== '308'||
													irbHeaderDetails.PROTOCOL_STATUS_CODE== '311')}">{{irbHeaderDetails?.PROTOCOL_STATUS}}</span>
							<i class="fa fa-exclamation-triangle ml-10" *ngIf="irbHeaderDetails?.IS_NEW_RULE=='N'" title="Follows OLD-RULE" aria-hidden="true"></i>
							
							<div style="margin-top: 30px">
								<p *ngIf="irbHeaderDetails.ASSIGNEE_PERSON_ID != null">
									COUHES Admin :
									<span>{{irbHeaderDetails?.ASSIGNEE_PERSON}}</span>
									<button *ngIf="(userDTO.role=='ADMIN' || userDTO.role=='CHAIR') && irbHeaderDetails?.PROTOCOL_STATUS_CODE !== '100'" type="button" class="btn admin-label" (click)="openAssignPopUp('U')">
										<i class="fa fa-pencil" aria-hidden="true"> Reassign</i>
									</button>
								</p>
								<p *ngIf="irbHeaderDetails.ASSIGNEE_PERSON_ID == null">
								<button *ngIf="(userDTO.role=='ADMIN' || userDTO.role=='CHAIR') && irbHeaderDetails?.PROTOCOL_STATUS_CODE !== '100'" type="button" class="btn admin-label" (click)="openAssignPopUp('I')">
									<i class="fa fa-plus" aria-hidden="true"></i> Assign IRB Admin</button>
								</p>
							</div>
						</div>

						<div class="i-icon-top">

							<span class="collapsed" (click)="toggle()" [ngClass]="isExpanded==true?'up-arrow':'down-arrow'" data-toggle="collapse" data-target="#collapseOne"
							 aria-expanded="false" aria-controls="collapseOne"> </span>
						</div>
						<div class="info-icon-header">
							<i class=" fa fa-info-circle" tabindex="0" placement="left" ngbPopover="{{PROTOCOL_BASIC_INFO}}" #protocolBasicInfo="ngbPopover"
							 (document:click)="protocolBasicInfo.close()" (click)="$event.stopPropagation()" container="body"></i>
						</div>
					</div>
				</div>
			</div>
			<div id="headingOne" class="expand-div">
				<div id="collapseOne" class="collapse" aria-labelledby="headingOne" *ngIf="isExpanded == true">
					<div class="row protocol-top apprve-date">
						<hr class="hr-line">
						<div class="col-6">
							<p>
								Last Approval Date :
								<span>{{(irbHeaderDetails?.LAST_APPROVAL_DATE === ' ' || irbHeaderDetails?.LAST_APPROVAL_DATE === null ) ? ' ':(irbHeaderDetails?.LAST_APPROVAL_DATE
									| date: 'MM/dd/yyyy')}}</span>
								<br /> Expected Start Date :
								<span>{{(irbHeaderDetails?.START_DATE === ' ' || irbHeaderDetails?.START_DATE === null ) ? ' ':(irbHeaderDetails?.START_DATE
									| date: 'MM/dd/yyyy')}}</span>
							</p>
						</div>
						<div class="col-6">
							<p>
								Lead Unit :
								<span>{{irbHeaderDetails?.UNIT_NAME}}</span>
								<br /> Anticipated End Date :
								<span>{{(irbHeaderDetails?.END_DATE === ' ' || irbHeaderDetails?.END_DATE === null ) ? ' ':(irbHeaderDetails?.END_DATE
									| date: 'MM/dd/yyyy')}}</span>
							</p>
						</div>
					</div>
					<div class="row  protocol-top apprve-date">
						<div class="col-12">
							<p>
								Purpose of Study :
								<span>{{irbHeaderDetails?.DESCRIPTION}}</span>
							</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
</div>
<div class="container-fluid">
	<section class="row btn-row-med sect-padding">
		<button class="btn btn-primary tab_btn" [routerLink]="['irbOverview']" [queryParams]="{protocolNumber :requestObject.protocolNumber}"
		 (click)="show_current_tab('irb_overView')" routerLinkActive="btnactive">
			<i class="fa fa-home" aria-hidden="true"></i>General
		</button>
		<button class="btn btn-primary tab_btn" type="submit">
			<i class="fa fa-question-circle-o" aria-hidden="true"></i>Additional Forms
		</button>
		<!--<button class="btn btn-primary tab_btn" type="submit"  [routerLink]="['irbQuestionaire']" [queryParams]= "{protocolNumber :requestObject.protocolNumber}" routerLinkActive="btnactive" (click)="show_current_tab('irb_questionaire')"><i class="fa fa-question-circle-o" aria-hidden="true"></i>Questionnaire</button> -->
		<button class="btn btn-primary tab_btn" type="submit" [routerLink]="['irbAttatchments']" [queryParams]="{protocolNumber :requestObject.protocolNumber}"
		 routerLinkActive="btnactive" (click)="show_current_tab('irb_attachments')">
			<i class="fa fa-paperclip" aria-hidden="true"></i>Attachments
		</button>
		<button class="btn btn-primary tab_btn" type="submit" [routerLink]="['irbHistory']" [queryParams]="{protocolNumber :requestObject.protocolNumber}"
		 routerLinkActive="btnactive" (click)="show_current_tab('irb_history')">
			<i class="fa fa-history" aria-hidden="true"></i>History
		</button>

		<button *ngIf="irbHeaderDetails?.PROTOCOL_STATUS_CODE != 100"  class="btn btn-primary tab_btn" type="submit" [routerLink]="['irbSubmissionDetails']"
		 [queryParams]="{protocolNumber :requestObject.protocolNumber}" routerLinkActive="btnactive" (click)="show_current_tab('irbSubmissionDetails')">
			<i class="fa fa-file-text-o" aria-hidden="true"></i>Submission Details
		</button>
		<button class="btn btn-primary tab_btn" type="submit" *ngIf="isAmmendmentOrRenewal()" [routerLink]="['irbSummaryDetails']"
		 [queryParams]="{protocolNumber :requestObject.protocolNumber}" routerLinkActive="btnactive" (click)="show_current_tab('irbSummaryDetails')">
			<i class="fa fa-file-text-o" aria-hidden="true"></i>Summary Details
		</button>
		<button class="btn btn-primary tab_btn" type="submit" [routerLink]="['irbActions']" [queryParams]="{protocolNumber :requestObject.protocolNumber, protocolId :irbHeaderDetails?.PROTOCOL_ID}"
		 routerLinkActive="btnactive" (click)="show_current_tab('irbActions')">
			<i class="fa fa-cog" aria-hidden="true"></i>Actions
		</button>

	</section>
</div>
<div>
	<router-outlet></router-outlet>
	<!-- <div class="row">
		<div class="col-10"></div>
		<div class="col-2 offset-md-4 exit-button">
			<button type="button" class="btn btn-warning" (click)="backClick($event)" title="Close">
				<i class="fa fa-times">&nbsp;</i>Exit</button>
		</div>
	</div> -->
</div>